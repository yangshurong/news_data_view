[{"C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\main.js":"1","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\App.vue":"2","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\registerServiceWorker.js":"3","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\router\\index.js":"4","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\store\\index.js":"5","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\views\\HomeView.vue":"6","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\views\\init_video.vue":"7","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\views\\ShengView.vue":"8","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\views\\ShiView.vue":"9","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\components\\MainPageLeft.vue":"10","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\components\\MainPageRight.vue":"11","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\components\\echarts_test.vue":"12","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\components\\main_support_right.vue":"13","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\components\\MainPageRightMap.vue":"14"},{"size":818,"mtime":1652251484647,"results":"15","hashOfConfig":"16"},{"size":100,"mtime":1652524758059,"results":"17","hashOfConfig":"16"},{"size":903,"mtime":1650957069446,"results":"18","hashOfConfig":"16"},{"size":794,"mtime":1652804098607,"results":"19","hashOfConfig":"16"},{"size":186,"mtime":1650957069457,"results":"20","hashOfConfig":"16"},{"size":1725,"mtime":1652525033608,"results":"21","hashOfConfig":"16"},{"size":3301,"mtime":1652543538050,"results":"22","hashOfConfig":"16"},{"size":32133,"mtime":1652544553002,"results":"23","hashOfConfig":"16"},{"size":25840,"mtime":1652544952845,"results":"24","hashOfConfig":"16"},{"size":3364,"mtime":1652252402936,"results":"25","hashOfConfig":"16"},{"size":3222,"mtime":1652524391028,"results":"26","hashOfConfig":"16"},{"size":839,"mtime":1651416624122,"results":"27","hashOfConfig":"16"},{"size":403,"mtime":1652524314559,"results":"28","hashOfConfig":"16"},{"size":18997,"mtime":1652510180454,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1b2las8",{"filePath":"32","messages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46"},{"filePath":"47","messages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49"},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56"},{"filePath":"57","messages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61"},"C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\main.js",[],"C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\App.vue",[],"C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\registerServiceWorker.js",[],"C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\router\\index.js",[],"C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\store\\index.js",[],"C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\views\\HomeView.vue",[],"C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\views\\init_video.vue",[],"C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\views\\ShengView.vue",["62","63","64"],"<template>\r\n  <div class=\"ShengBackground\">\r\n    <section class=\"item_left\">\r\n      <LeftPage @title_change=\"title_change\" />\r\n    </section>\r\n    <div class=\"item_right\">\r\n      <div class=\"title\"></div>\r\n      <div class=\"content\">\r\n        <div class=\"left\">\r\n          <div class=\"speed_region\" style=\"display: flex\">\r\n            <div class=\"time_select\">\r\n              <div\r\n                style=\"\r\n                  font-size: 0.3rem;\r\n                  color: #ffffff;\r\n                  margin-bottom: 0.0833rem;\r\n                \"\r\n              >\r\n                2021\r\n              </div>\r\n              <el-slider\r\n                v-model=\"time_select_value\"\r\n                :max=\"2021\"\r\n                :min=\"2017\"\r\n                vertical\r\n                @change=\"get_time_change\"\r\n                height=\"4.2rem\"\r\n                :step=\"1\"\r\n              >\r\n              </el-slider>\r\n              <div\r\n                style=\"font-size: 0.3rem; color: #ffffff; margin-top: 0.1667rem\"\r\n              >\r\n                2017\r\n              </div>\r\n            </div>\r\n            <div\r\n              class=\"speed_region_chart\"\r\n              ref=\"speed_region\"\r\n              style=\"width: 12.9333rem; height: 8.8333rem; margin-top: 1rem\"\r\n            ></div>\r\n          </div>\r\n          <div class=\"down\">\r\n            <div class=\"news\">\r\n              <Carousel\r\n                autoplay\r\n                v-model=\"news_value\"\r\n                loop\r\n                style=\"width: 100%; height: 100%\"\r\n              >\r\n                <CarouselItem v-for=\"(item, i) in news_list\" :key=\"i\">\r\n                  <!-- <img\r\n                    :src=\"item.url\"\r\n                    alt=\"加载失败\"\r\n                    width=\"6.7833rem\"\r\n                    height=\"3.4833rem\"\r\n                    style=\"margin: 1.4333rem 0 0 1.1667rem\"\r\n                  /> -->\r\n                  <div\r\n                    :style=\"{\r\n                      margin: '1.4333rem 0 0 1.1667rem',\r\n                      height: '3.4833rem',\r\n                      width: '6.8333rem',\r\n                      background: 'url(' + item.url + ') no-repeat',\r\n                      'background-size': '100% 100%',\r\n                    }\"\r\n                  ></div>\r\n                </CarouselItem>\r\n              </Carousel>\r\n            </div>\r\n            <div class=\"speed_average\">\r\n              <div\r\n                ref=\"speed_average\"\r\n                style=\"width: 100%; height: 100%; margin-top: 0.5rem\"\r\n              ></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"right\">\r\n          <div class=\"num_tag\">\r\n            <div\r\n              ref=\"num_tag\"\r\n              style=\"width: 95%; height: 95%; margin-top: 0.1667rem\"\r\n            ></div>\r\n          </div>\r\n          <div class=\"word_cloud\">\r\n            <svg\r\n              :width=\"nowSize(width)\"\r\n              :height=\"nowSize(height)\"\r\n              style=\"margin-top: 0.8333rem\"\r\n            >\r\n              <a\r\n                class=\"fontA\"\r\n                :style=\"{ fill: tag.color, 'font-weight': 'bold' }\"\r\n                v-for=\"(tag, index) in tags\"\r\n                :key=\"`tag-${index}`\"\r\n              >\r\n                <text\r\n                  :id=\"tag.id\"\r\n                  :x=\"nowSize(tag.x)\"\r\n                  :y=\"nowSize(tag.y)\"\r\n                  :font-size=\"\r\n                    nowSize(20) *\r\n                    (nowSize(600) / (nowSize(600) - nowSize(tag.z)))\r\n                  \"\r\n                  :fill-opacity=\"(nowSize(400) + nowSize(tag.z)) / nowSize(400)\"\r\n                  @mousemove=\"listenerMove($event)\"\r\n                  @mouseout=\"listenerOut($event)\"\r\n                  @click=\"clickToPage\"\r\n                >\r\n                  {{ tag.text }}\r\n                </text>\r\n              </a>\r\n            </svg>\r\n          </div>\r\n          <div class=\"speed_tag\">\r\n            <div\r\n              ref=\"speed_tag\"\r\n              style=\"width: 100%; height: 100%; margin-top: 0.5rem\"\r\n            ></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport LeftPage from \"../components/MainPageLeft.vue\";\r\nimport word_cloud_data from \"../assets/Sheng/item_data/word_cloud_3ddata.json\";\r\nimport num_tag_data from \"../assets/Sheng/item_data/locate_tag_num.json\";\r\nimport speed_average_data from \"../assets/Sheng/item_data/speed_average.json\";\r\nimport shi_speed_data from \"../assets/Shi/speed_data.json\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      cur_info: {\r\n        year: \"2017\",\r\n        title: \"政治\",\r\n        region: \"山西\",\r\n        region_data: \"\",\r\n      },\r\n      locate_data_url: {\r\n        河北: \"hebei.json\",\r\n        山东: \"shandong.json\",\r\n        山西: \"shanxi.json\",\r\n        河南: \"henan.json\",\r\n        辽宁: \"liaoning.json\",\r\n        安徽: \"anhui.json\",\r\n        广东: \"guangdong.json\",\r\n        广西: \"guangxi.json\",\r\n        内蒙古: \"neimenggu.json\",\r\n        新疆: \"xinjiang.json\",\r\n        西藏: \"xizang.json\",\r\n        吉林: \"jilin.json\",\r\n      },\r\n      news_value: 0,\r\n      news_list: [\r\n        {\r\n          url: \"http://www.gov.cn/xinwen/2022-05/01/5688367/images/874baddfbc4c43809aae929bf2a190a2.JPG\",\r\n        },\r\n        {\r\n          url: \"http://www.gov.cn/xinwen/2022-05/01/5688367/images/441dbcc82f714ce58365ab925ac4c783.JPG\",\r\n        },\r\n        {\r\n          url: \"http://www.gov.cn/xinwen/2022-05/01/5688367/images/89106ba8a3a6455e8d323ba63e307cf0.JPG\",\r\n        },\r\n      ],\r\n      width: 576,\r\n      height: 300,\r\n      time_select_value: 0,\r\n      tagsNum: 0, //标签数量\r\n      RADIUS: 120, //球的半径\r\n      speedX: Math.PI / 360 / 0.5, //球一帧绕x轴旋转的角度\r\n      speedY: Math.PI / 360 / 0.5, //球-帧绕y轴旋转的角度\r\n      tags: [],\r\n      data: word_cloud_data[\"value\"],\r\n      timer: null,\r\n      color_list: [\r\n        \"#4587E7\",\r\n        \"#35AB33\",\r\n        \"#F5AD1D\",\r\n        \"#ff7f50\",\r\n        \"#da70d6\",\r\n        \"#32cd32\",\r\n        \"#6495ed\",\r\n        \"#F3FA00\",\r\n      ],\r\n    };\r\n  },\r\n  computed: {\r\n    CX() {\r\n      //球心x坐标\r\n      return this.width / 2;\r\n    },\r\n    CY() {\r\n      //球心y坐标\r\n      return this.height / 2;\r\n    },\r\n    nowSize() {\r\n      return function nowSize(val, initWidth = 1920) {\r\n        let nowClientWidth = document.documentElement.clientWidth;\r\n        return val * (nowClientWidth / initWidth);\r\n      };\r\n    },\r\n  },\r\n  created() {\r\n    this.cur_info.region = this.$route.query.region;\r\n    this.initData();\r\n  },\r\n  mounted() {\r\n    //console.log(this.$route.params.region);\r\n\r\n    //this.set_wordcloud();\r\n    this.runTags();\r\n    this.set_speed_average();\r\n    this.set_speed_tag();\r\n    this.set_speed_region();\r\n    this.set_num_tag();\r\n    this.set_speed_region();\r\n    window.addEventListener(\"resize\", this.screenAdapter);\r\n    this.screenAdapter();\r\n  },\r\n  methods: {\r\n    initData() {\r\n      //初始化标签位置\r\n      let tags = [];\r\n      this.tagsNum = this.data.length;\r\n      for (let i = 0; i < this.data.length; i++) {\r\n        let tag = {};\r\n        let k = -1 + (2 * (i + 1) - 1) / this.tagsNum;\r\n        let a = Math.acos(k);\r\n        let b = a * Math.sqrt(this.tagsNum * Math.PI); //计算标签相对于球心的角度\r\n        tag.text = this.data[i];\r\n        tag.x = this.CX + this.RADIUS * Math.sin(a) * Math.cos(b); //根据标签角度求出标签的x,y,z坐标\r\n        tag.y = this.CY + this.RADIUS * Math.sin(a) * Math.sin(b);\r\n        tag.z = this.RADIUS * Math.cos(a);\r\n        tag.id = i; // 给标签添加id\r\n        tag.color =\r\n          \"rgb(\" +\r\n          [\r\n            Math.round(Math.random() * 254),\r\n            Math.round(Math.random() * 254),\r\n            Math.round(Math.random() * 254),\r\n          ].join(\",\") +\r\n          \")\";\r\n        tags.push(tag);\r\n        // console.log(tag);\r\n      }\r\n      this.tags = tags; //让vue替我们完成视图更新\r\n    },\r\n    // 纵向旋转\r\n    rotateX(angleX) {\r\n      var cos = Math.cos(angleX);\r\n      var sin = Math.sin(angleX);\r\n      for (let tag of this.tags) {\r\n        var y1 = (tag.y - this.CY) * cos - tag.z * sin + this.CY;\r\n        var z1 = tag.z * cos + (tag.y - this.CY) * sin;\r\n        tag.y = y1;\r\n        tag.z = z1;\r\n      }\r\n    },\r\n    // 横向旋转\r\n    rotateY(angleY) {\r\n      var cos = Math.cos(angleY);\r\n      var sin = Math.sin(angleY);\r\n      for (let tag of this.tags) {\r\n        var x1 = (tag.x - this.CX) * cos - tag.z * sin + this.CX;\r\n        var z1 = tag.z * cos + (tag.x - this.CX) * sin;\r\n        tag.x = x1;\r\n        tag.z = z1;\r\n      }\r\n    },\r\n    // 运动函数\r\n    async runTags() {\r\n      if (typeof this.timer === \"number\") {\r\n        clearInterval(this.timer);\r\n        this.timer = null;\r\n      }\r\n      let timer = setInterval(() => {\r\n        this.rotateX(this.speedX);\r\n        this.rotateY(this.speedY);\r\n      }, 17);\r\n      this.timer = timer;\r\n    },\r\n    // 监听移入事件\r\n    listenerMove(e) {\r\n      if (e.target.id) {\r\n        clearInterval(this.timer);\r\n      }\r\n    },\r\n    // 监听移出事件\r\n    listenerOut(e) {\r\n      if (e.target.id) {\r\n        this.runTags();\r\n      }\r\n    },\r\n    // 点击事件\r\n    clickToPage() {},\r\n    //up----------------------------------------------------------set word_cloud\r\n\r\n    title_change(new_title) {\r\n      //title变化后\r\n      this.cur_info.title = new_title;\r\n      if (\r\n        num_tag_data[this.cur_info.region][this.cur_info.year][\r\n          this.cur_info.title\r\n        ] == null\r\n      ) {\r\n        alert(\"这里没有数据\");\r\n        return;\r\n      }\r\n      this.set_num_tag();\r\n      this.set_speed_tag();\r\n      this.screenAdapter();\r\n    },\r\n    get_time_change(new_time) {\r\n      if (\r\n        num_tag_data[this.cur_info.region][this.cur_info.year][\r\n          this.cur_info.title\r\n        ] == null\r\n      ) {\r\n        alert(\"这里没有数据\");\r\n        return;\r\n      }\r\n      //时间变化后\r\n      this.cur_info.year = new_time.toString();\r\n      this.set_num_tag();\r\n      this.set_speed_tag();\r\n      this.screenAdapter();\r\n    },\r\n    async set_num_tag() {\r\n      // if (!this.num_tag_Chart)\r\n      if (this.num_tag_Chart) this.num_tag_Chart.clear();\r\n      else this.num_tag_Chart = this.$echarts.init(this.$refs.num_tag);\r\n\r\n      this.num_tag_Chart.setOption({\r\n        dataset: {\r\n          source:\r\n            num_tag_data[this.cur_info.region][this.cur_info.year][\r\n              this.cur_info.title\r\n            ],\r\n        },\r\n        grid: { containLabel: true },\r\n        xAxis: {\r\n          name: \"数量\",\r\n          nameTextStyle: {\r\n            color: \"rgba(255,255,255)\",\r\n          },\r\n\r\n          axisLabel: {\r\n            textStyle: {\r\n              color: \"rgba(255,255,255)\",\r\n            },\r\n          },\r\n        },\r\n        yAxis: {\r\n          type: \"category\",\r\n          nameTextStyle: {\r\n            color: \"rgba(255,255,255)\",\r\n          },\r\n\r\n          axisLabel: {\r\n            textStyle: {\r\n              color: \"rgba(255,255,255)\",\r\n            },\r\n          },\r\n        },\r\n        visualMap: {\r\n          orient: \"horizontal\",\r\n          left: \"center\",\r\n          min: 0,\r\n          max: 10,\r\n          text: [\"慢速响应\", \"快速响应\"],\r\n          // Map the score column to color\r\n          dimension: \"avg\",\r\n          inRange: {\r\n            color: [\"#65B581\", \"#FFCE34\", \"#FD665F\"],\r\n          },\r\n          textStyle: {\r\n            color: \"#FFFFFF\",\r\n          },\r\n        },\r\n        series: [\r\n          {\r\n            type: \"bar\",\r\n            encode: {\r\n              x: \"num\",\r\n              y: \"sub_title\",\r\n            },\r\n          },\r\n        ],\r\n      });\r\n    },\r\n    async set_wordcloud() {\r\n      //-------------------------set wordcloud\r\n      if (!this.word_cloud_Chart)\r\n        this.word_cloud_Chart = this.$echarts.init(this.$refs.word_cloud);\r\n      var maskImage = new Image();\r\n      maskImage.src = word_cloud_data.image;\r\n      this.word_cloud_Chart.setOption({\r\n        series: [\r\n          {\r\n            type: \"wordCloud\",\r\n            shape: \"circle\",\r\n            keepAspect: false,\r\n            left: \"center\",\r\n            top: \"center\",\r\n            width: \"70%\",\r\n            height: \"70%\",\r\n            right: null,\r\n            bottom: null,\r\n            //maskImage:maskImage,\r\n            sizeRange: [12, 30],\r\n            rotationRange: [-45, 45],\r\n            rotationStep: 90,\r\n            // 词间距，数值越小，间距越小，这里间距太小的话，会出现大词把小词套住的情况，比如一个大的口字，中间会有比较大的空隙，这时候他会把一些很小的字放在口字里面，这样的话，鼠标就无法选中里面的那个小字\r\n            gridSize: 2,\r\n            // 允许词太大的时候，超出画布的范围\r\n            drawOutOfBound: false,\r\n            // 布局的时候是否有动画\r\n            layoutAnimation: false,\r\n            textStyle: {\r\n              fontWeight: \"bold\",\r\n              color: function () {\r\n                return (\r\n                  \"rgb(\" +\r\n                  [\r\n                    Math.round(Math.random() * 254),\r\n                    Math.round(Math.random() * 254),\r\n                    Math.round(Math.random() * 254),\r\n                  ].join(\",\") +\r\n                  \")\"\r\n                );\r\n              },\r\n            },\r\n            emphasis: {\r\n              focus: \"self\",\r\n              textStyle: {\r\n                textShadowBlur: 10,\r\n                textShadowColor: \"#333\",\r\n              },\r\n            },\r\n\r\n            // Data is an array. Each array item must have name and value property.\r\n            data: word_cloud_data.value,\r\n          },\r\n        ],\r\n      });\r\n    },\r\n    async set_speed_average() {\r\n      //--------------------set speed_average\r\n      //-------------------------------------------------------------set scar\r\n      if (!this.speed_average_Chart)\r\n        this.speed_average_Chart = this.$echarts.init(this.$refs.speed_average);\r\n      let scar_data = speed_average_data[\"scar\"][this.cur_info.region];\r\n      let scar_series = [],\r\n        scar_legend = [];\r\n      let id = 0;\r\n      for (let title_name in scar_data) {\r\n        scar_series.push({\r\n          name: title_name,\r\n          type: \"line\",\r\n          id: title_name,\r\n          dataGroupId: title_name,\r\n          lineStyle: {\r\n            color: this.color_list[id],\r\n          },\r\n          universalTransition: {\r\n            enabled: true,\r\n            delay: function (idx, count) {\r\n              return Math.random() * 400;\r\n            },\r\n          },\r\n          data: scar_data[title_name],\r\n        });\r\n        scar_legend.push({\r\n          name: title_name,\r\n          icon: \"circle\",\r\n          itemStyle: {\r\n            color: this.color_list[id],\r\n          },\r\n        });\r\n        id++;\r\n      }\r\n      console.log(scar_legend);\r\n      let speed_region_average_scatterOption = {\r\n        legend: {\r\n          show: true,\r\n          data: scar_legend,\r\n          textStyle: {\r\n            color: \"#FFFFFF\",\r\n            fontSize: 14,\r\n          },\r\n          left: 80,\r\n          top: 30,\r\n        },\r\n        xAxis: {\r\n          scale: true,\r\n          name: \"年份\",\r\n          nameTextStyle: {\r\n            color: \"rgba(255,255,255)\",\r\n          },\r\n\r\n          axisLabel: {\r\n            textStyle: {\r\n              color: \"rgba(255,255,255)\",\r\n            },\r\n          },\r\n        },\r\n        yAxis: {\r\n          scale: true,\r\n          name: \"响应时间\",\r\n          nameTextStyle: {\r\n            color: \"rgba(255,255,255)\",\r\n          },\r\n\r\n          axisLabel: {\r\n            textStyle: {\r\n              color: \"rgba(255,255,255)\",\r\n            },\r\n          },\r\n        },\r\n        series: scar_series,\r\n      };\r\n      //-------------------------------------------------------设置bar\r\n      let bar_data = speed_average_data[\"bar\"][this.cur_info.region];\r\n      let bar_series = [],\r\n        bar_x_data = [];\r\n      for (let title_name in bar_data) {\r\n        bar_x_data.push(title_name);\r\n        bar_series.push({\r\n          value: bar_data[title_name],\r\n          groupId: title_name,\r\n        });\r\n      }\r\n      let bar_key = bar_x_data;\r\n      let speed_region_average_barOption = {\r\n        xAxis: {\r\n          type: \"category\",\r\n          data: bar_x_data,\r\n          name: \"类别\",\r\n          nameTextStyle: {\r\n            color: \"rgba(255,255,255)\",\r\n          },\r\n          axisLabel: {\r\n            textStyle: {\r\n              color: \"rgba(255,255,255)\",\r\n            },\r\n          },\r\n        },\r\n        yAxis: {\r\n          name: \"响应时间\",\r\n          nameTextStyle: {\r\n            color: \"rgba(255,255,255)\",\r\n          },\r\n\r\n          axisLabel: {\r\n            textStyle: {\r\n              color: \"rgba(255,255,255)\",\r\n            },\r\n          },\r\n        },\r\n        series: [\r\n          {\r\n            type: \"bar\",\r\n            id: \"total\",\r\n            data: bar_series,\r\n            universalTransition: {\r\n              enabled: true,\r\n              seriesKey: bar_key,\r\n              delay: function (idx, count) {\r\n                return Math.random() * 400;\r\n              },\r\n            },\r\n          },\r\n        ],\r\n      };\r\n\r\n      let currentOption = speed_region_average_scatterOption,\r\n        that = this;\r\n      that.speed_average_interval = setInterval(function () {\r\n        currentOption =\r\n          currentOption === speed_region_average_scatterOption\r\n            ? speed_region_average_barOption\r\n            : speed_region_average_scatterOption;\r\n        that.speed_average_Chart.setOption(currentOption, true);\r\n      }, 2000);\r\n      that.speed_average_Chart.on(\"mouseover\", function () {\r\n        clearInterval(that.speed_average_interval);\r\n      });\r\n      that.speed_average_Chart.on(\"mouseout\", function () {\r\n        that.speed_average_interval = setInterval(function () {\r\n          if (currentOption === speed_region_average_scatterOption) {\r\n            currentOption = speed_region_average_barOption;\r\n            that.speed_average_Chart.setOption(currentOption, true);\r\n          } else {\r\n            currentOption = speed_region_average_scatterOption;\r\n            that.speed_average_Chart.setOption(currentOption, true);\r\n            let option = {\r\n              legend: {\r\n                textStyle: {\r\n                  fontSize: that.nowSize(14),\r\n                },\r\n                left: that.nowSize(80),\r\n                top: that.nowSize(20),\r\n              },\r\n            };\r\n            that.speed_average_Chart.setOption(option);\r\n            that.speed_average_Chart.resize();\r\n          }\r\n        }, 2000);\r\n      });\r\n    },\r\n    async set_speed_region() {\r\n      //--------------------set speed_region\r\n      //await this.$axios({\r\n      //  url: 'https://geo.datav.aliyun.com/areas_v3/bound/370000_full.json',\r\n      //  method: \"get\",\r\n      //}).then((res) => {\r\n      //  this.cur_info.region_data = res.data;\r\n      //});\r\n      this.cur_info.region_data = require(\"../assets/map/province/\" +\r\n        this.locate_data_url[this.cur_info.region]);\r\n      this.$echarts.registerMap(\r\n        this.cur_info.region,\r\n        this.cur_info.region_data\r\n      );\r\n      let _data = this.cur_info.region_data.features,\r\n        scar_data = [];\r\n      for (let i in _data) {\r\n        let x = _data[i].properties.cp[0],\r\n          y = _data[i].properties.cp[1],\r\n          z = _data[i].properties.name;\r\n        scar_data.push([x, y, z]);\r\n      }\r\n      //-----------------------------------------------------------处理散点的位置\r\n      this.cur_info.mx = 0;\r\n      if (this.cur_info.region == \"山西\") {\r\n        for (let re in shi_speed_data) {\r\n          let y = this.cur_info.year;\r\n          if (y in shi_speed_data[re] == true) {\r\n            console.log(shi_speed_data[re][y][\"avg\"]);\r\n            this.cur_info.mx = Math.max(\r\n              this.cur_info.mx,\r\n              shi_speed_data[re][y][\"avg\"]\r\n            );\r\n          }\r\n        }\r\n      }\r\n      this.speed_region_Chart = this.$echarts.init(this.$refs.speed_region);\r\n      let that = this;\r\n      let speed_region_option = {\r\n        geo: {\r\n          map: this.cur_info.region,\r\n          z: 2,\r\n          aspectScale: 1,\r\n          layoutCenter: [\"50%\", \"50%\"], //地图位置\r\n          zoom: 1, //当前视角的缩放比例\r\n          scaleLimit: {\r\n            //滚轮缩放的极限控制\r\n            min: 1,\r\n            max: 2,\r\n          },\r\n          label: {\r\n            normal: {\r\n              show: true,\r\n              textStyle: {\r\n                color: \"#FFFFFF\",\r\n                fontSize: 18,\r\n              },\r\n            },\r\n            emphasis: {\r\n              show: true,\r\n              textStyle: {\r\n                color: \"#FFFFFF\",\r\n                fontSize: 18,\r\n              },\r\n            },\r\n          },\r\n          itemStyle: {\r\n            normal: {\r\n              shadowColor: \"rgba(21,55,112,255)\",\r\n              shadowOffsetX: 10,\r\n              shadowOffsetY: 10,\r\n              areaColor: \"rgba(24,48,82,255)\",\r\n              borderColor: \"rgba(84,113,166)\",\r\n              borderWidth: 1.5,\r\n            },\r\n            emphasis: {\r\n              areaColor: \"rgba(7,69,162)\",\r\n            },\r\n          },\r\n        },\r\n        series: [\r\n          {\r\n            type: \"map\",\r\n            mapType: this.cur_info.region,\r\n            aspectScale: 1,\r\n            zoom: 1,\r\n            z: 1,\r\n            layoutCenter: [\"50%\", \"50%\"], //地图位置\r\n            label: {\r\n              normal: {\r\n                show: false,\r\n              },\r\n              emphasis: {\r\n                show: false,\r\n              },\r\n            },\r\n            itemStyle: {\r\n              normal: {\r\n                shadowColor: \"rgba(22,57,89,255)\",\r\n                shadowOffsetX: 20,\r\n                shadowOffsetY: 20,\r\n                //areaColor: \"rgba(22,57,89,255)\",\r\n                borderColor: \"#4a75ff\",\r\n                borderWidth: 7,\r\n              },\r\n              emphasis: {\r\n                areaColor: \"rgba(22,57,89,0)\",\r\n              },\r\n            },\r\n          },\r\n          {\r\n            show: true,\r\n            type: \"effectScatter\",\r\n            symbolSize: function (params) {\r\n              if (that.cur_info.region != \"山西\") return 0;\r\n              let re = params[2].substring(0, 2);\r\n              if (re in shi_speed_data == false) return 0;\r\n              //console.log(re)\r\n              let y = that.cur_info.year;\r\n              if (y in shi_speed_data[re] == false) return 0;\r\n              let cur_v = (shi_speed_data[re][y][\"avg\"] / that.cur_info.mx) * 1;\r\n              console.log(cur_v);\r\n              return 10 / cur_v;\r\n            },\r\n            rippleEffect: {\r\n              // 涟漪特效相关配置。\r\n              scale: 4, // 控制涟漪大小\r\n            },\r\n            coordinateSystem: \"geo\", // series坐标系类型\r\n            data: scar_data,\r\n            z: 10,\r\n          },\r\n        ],\r\n      };\r\n      this.speed_region_Chart.setOption(speed_region_option);\r\n      this.speed_region_Chart.on(\"click\", function (params) {\r\n        if (that.cur_info.region != \"山西\") return;\r\n        if (\r\n          params.name.substring(0, 2) != \"吕梁\" &&\r\n          params.name.substring(0, 2) != \"晋中\" &&\r\n          params.name.substring(0, 2) != \"阳泉\" &&\r\n          params.name.substring(0, 2) != \"朔州\" &&\r\n          params.name.substring(0, 2) != \"太原\"\r\n        )\r\n          return;\r\n\r\n        that.$router.push({\r\n          name: \"ShiView\",\r\n          query: {\r\n            region: params.name.substring(0, 2),\r\n          },\r\n        });\r\n      });\r\n    },\r\n    async set_speed_tag() {\r\n      //--------------------------set speedTag\r\n      if (this.speed_tag_Chart) this.speed_tag_Chart.clear();\r\n      else this.speed_tag_Chart = this.$echarts.init(this.$refs.speed_tag);\r\n\r\n      this.speed_tag_Chart.clear();\r\n      let that = this;\r\n      this.speed_tag_Chart.setOption({\r\n        dataset: {\r\n          source:\r\n            num_tag_data[this.cur_info.region][this.cur_info.year][\r\n              this.cur_info.title\r\n            ],\r\n        },\r\n        polar: {\r\n          radius: [30, \"70%\"],\r\n        },\r\n        radiusAxis: {\r\n          type: \"category\",\r\n          nameTextStyle: {\r\n            color: \"rgba(255,255,255)\",\r\n          },\r\n          show: false,\r\n          axisLabel: {\r\n            textStyle: {\r\n              color: \"rgba(255,255,255)\",\r\n            },\r\n          },\r\n        },\r\n        angleAxis: {\r\n          startAngle: 75,\r\n          name: \"响应时间\",\r\n          nameTextStyle: {\r\n            color: \"rgba(255,255,255)\",\r\n          },\r\n\r\n          axisLabel: {\r\n            textStyle: {\r\n              color: \"rgba(255,255,255)\",\r\n            },\r\n          },\r\n        },\r\n        tooltip: {},\r\n        series: {\r\n          type: \"bar\",\r\n          coordinateSystem: \"polar\",\r\n          encode: {\r\n            radius: 0,\r\n            angle: 1,\r\n          },\r\n          label: {\r\n            show: false,\r\n            position: \"middle\",\r\n          },\r\n          itemStyle: {\r\n            color: function (params) {\r\n              return that.color_list[params.dataIndex];\r\n            },\r\n          },\r\n        },\r\n      });\r\n    },\r\n    screenAdapter() {\r\n      let that = this;\r\n      setTimeout(function () {\r\n        if (that.num_tag_Chart) {\r\n          let options = {\r\n            xAxis: {\r\n              nameTextStyle: {\r\n                fontSize: that.nowSize(16),\r\n              },\r\n              axisLabel: {\r\n                textStyle: {\r\n                  fontSize: that.nowSize(16),\r\n                },\r\n              },\r\n            },\r\n            yAxis: {\r\n              nameTextStyle: {\r\n                fontSize: that.nowSize(16),\r\n              },\r\n              axisLabel: {\r\n                textStyle: {\r\n                  fontSize: that.nowSize(16),\r\n                },\r\n              },\r\n            },\r\n            visualMap: {\r\n              textStyle: {\r\n                fontSize: that.nowSize(16),\r\n              },\r\n            },\r\n          };\r\n          that.num_tag_Chart.setOption(options);\r\n          that.num_tag_Chart.resize();\r\n        }\r\n      }, 300);\r\n      setTimeout(function () {\r\n        if (that.speed_average_Chart) {\r\n          let option = {\r\n            legend: {\r\n              textStyle: {\r\n                fontSize: that.nowSize(14),\r\n              },\r\n              left: that.nowSize(80),\r\n              top: that.nowSize(20),\r\n            },\r\n          };\r\n          that.speed_average_Chart.setOption(option);\r\n          that.speed_average_Chart.resize();\r\n        }\r\n      }, 300);\r\n      setTimeout(function () {\r\n        if (that.speed_region_Chart) {\r\n          let options = {\r\n            geo: {\r\n              label: {\r\n                normal: {\r\n                  textStyle: {\r\n                    fontSize: that.nowSize(18),\r\n                  },\r\n                  offset: [0, that.nowSize(-20)],\r\n                },\r\n                emphasis: {\r\n                  textStyle: {\r\n                    fontSize: that.nowSize(18),\r\n                  },\r\n                  offset: [0, that.nowSize(-20)],\r\n                },\r\n              },\r\n              itemStyle: {\r\n                normal: {\r\n                  shadowOffsetX: that.nowSize(10),\r\n                  shadowOffsetY: that.nowSize(10),\r\n                  borderWidth: that.nowSize(1.5),\r\n                },\r\n              },\r\n            },\r\n            series: [\r\n              {\r\n                itemStyle: {\r\n                  normal: {\r\n                    shadowOffsetX: that.nowSize(20),\r\n                    shadowOffsetY: that.nowSize(20),\r\n                    borderWidth: that.nowSize(7),\r\n                  },\r\n                },\r\n              },\r\n              {\r\n                rippleEffect: {\r\n                  // 涟漪特效相关配置。\r\n                  scale: that.nowSize(4), // 控制涟漪大小\r\n                },\r\n              },\r\n            ],\r\n          };\r\n          that.speed_region_Chart.setOption(options);\r\n          that.speed_region_Chart.resize();\r\n        }\r\n      }, 300);\r\n      setTimeout(function () {\r\n        if (that.speed_tag_Chart) {\r\n          let options = {\r\n            polar: {\r\n              radius: [that.nowSize(30), \"70%\"],\r\n            },\r\n          };\r\n          that.speed_tag_Chart.setOption(options);\r\n          that.speed_tag_Chart.resize();\r\n        }\r\n      }, 300);\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    if (this.speed_region_Chart) {\r\n      this.speed_region_Chart.dispose();\r\n      this.speed_region_Chart = null;\r\n    }\r\n    if (this.detail_chart) {\r\n      this.detail_chart.dispose();\r\n      this.detail_chart = null;\r\n    }\r\n    if (this.word_cloud_Chart) {\r\n      this.word_cloud_Chart.dispose();\r\n      this.word_cloud_Chart = null;\r\n    }\r\n    if (this.num_tag_Chart) {\r\n      this.num_tag_Chart.dispose();\r\n      this.num_tag_Chart = null;\r\n    }\r\n    if (this.speed_average_Chart) {\r\n      this.speed_average_Chart.dispose();\r\n      this.speed_average_Chart = null;\r\n    }\r\n    clearInterval(this.speed_average_interval);\r\n    window.removeEventListener(\"resize\", this.screenAdapter);\r\n  },\r\n  components: {\r\n    LeftPage,\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.fontA:hover {\r\n  fill: #ffffff;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n}\r\n.time_select {\r\n  width: 0.4667rem;\r\n  height: 4.2rem;\r\n  margin-left: 1.8rem;\r\n  margin-top: 4.6167rem;\r\n}\r\n.speed_region {\r\n  width: 17.5167rem;\r\n  height: 9.9667rem;\r\n  //width: 32rem;\r\n  //height: 18rem;\r\n  margin-top: 2.1rem;\r\n  background: url(../assets/Sheng/speed_region.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  justify-content: center;\r\n}\r\n.news {\r\n  width: 9.1rem;\r\n  height: 5.4167rem;\r\n  margin-top: 0.2167rem;\r\n  background: url(../assets/Sheng/news.png) no-repeat;\r\n  background-size: 100% 100%;\r\n}\r\n.speed_average {\r\n  width: 7.9833rem;\r\n  height: 5.4167rem;\r\n  margin-top: 0.2667rem;\r\n  margin-left: 0.3667rem;\r\n  background: url(../assets/Sheng/speed_average.png) no-repeat;\r\n  background-size: 100% 100%;\r\n}\r\n.num_tag {\r\n  width: 9.6rem;\r\n  height: 5.6667rem;\r\n  background: url(../assets/Sheng/num_tag.png) no-repeat;\r\n  background-size: 100% 100%;\r\n}\r\n.word_cloud {\r\n  width: 9.6rem;\r\n  height: 5.6667rem;\r\n  margin-top: 0.1667rem;\r\n\r\n  background: url(../assets/Sheng/word_cloud.png) no-repeat;\r\n  background-size: 100% 100%;\r\n}\r\n.speed_tag {\r\n  width: 9.6rem;\r\n  height: 5.0333rem;\r\n  margin-top: 0.1667rem;\r\n\r\n  background: url(../assets/Sheng/speed_tag.png) no-repeat;\r\n  background-size: 100% 100%;\r\n}\r\n.ShengBackground {\r\n  width: 32.2667rem;\r\n  height: 18.05rem;\r\n  background: url(https://ysr-data-view.oss-cn-hangzhou.aliyuncs.com/C778FA422F5F4FDB8043352BFEBFDC6B-6-2.png)\r\n    no-repeat fixed;\r\n  background-size: 100% 100%;\r\n  margin: auto;\r\n  display: flex;\r\n  overflow: hidden;\r\n  //background-position: center top;\r\n  .item_left {\r\n    margin-left: 0rem;\r\n    margin-top: 0rem;\r\n    width: 4.45rem;\r\n    height: 100%;\r\n    line-height: 0.3333rem;\r\n    opacity: 0.89;\r\n    background-color: rgba(29, 76, 170, 100);\r\n    text-align: center;\r\n  }\r\n  .item_right {\r\n    //display: flex;\r\n    //flex-flow: column;\r\n    .title {\r\n      margin-left: 0rem;\r\n      margin-top: 0rem;\r\n      width: 27.8167rem;\r\n      height: 5rem;\r\n      background: url(../assets/main_page_title.png) no-repeat;\r\n      background-size: 100% 100%;\r\n      background-position: center top;\r\n    }\r\n    .content {\r\n      margin-top: -5rem;\r\n      display: flex;\r\n      .left {\r\n        margin-left: 0.7333rem;\r\n        display: flex;\r\n        flex-flow: column;\r\n        height: 100%;\r\n        width: 100%;\r\n        .down {\r\n          display: flex;\r\n        }\r\n      }\r\n      .right {\r\n        display: flex;\r\n        flex-flow: column;\r\n        margin-left: 0.1667rem;\r\n        margin-top: 1rem;\r\n        margin-right: 0.1667rem;\r\n        width: 100%;\r\n        height: 100%;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\views\\ShiView.vue",["65"],"<template>\r\n  <div class=\"ShiBackground\">\r\n    <div class=\"title\"></div>\r\n    <div class=\"content\">\r\n      <div class=\"policy_content\">\r\n        <div style=\"height: 103px; width: 100%\"></div>\r\n        <div v-for=\"(item, i) in policy_content_list\" :key=\"i\">\r\n          <div class=\"policy_item\">\r\n            <div class=\"policy_picture\"></div>\r\n            <div class=\"policy_right_content\">\r\n              <div class=\"policy_title\">{{item.title}}</div>\r\n              <div class=\"policy_text\">{{item.content}}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"news_content\">\r\n        <div class=\"map_chart\">\r\n          <div\r\n            ref=\"region\"\r\n            style=\"width: 100%; height: 100%; margin-left: 0rem\"\r\n          ></div>\r\n        </div>\r\n        <div class=\"time\">\r\n          <div style=\"font-size: 0.3rem; color: #ffffff; margin-bottom: 0rem\">\r\n            2017\r\n          </div>\r\n          <el-slider\r\n            v-model=\"time_select_value\"\r\n            :max=\"2021\"\r\n            :min=\"2017\"\r\n            @change=\"get_time_change\"\r\n            :step=\"1\"\r\n            class=\"time_select\"\r\n          >\r\n          </el-slider>\r\n\r\n          <div style=\"font-size: 0.3rem; color: #ffffff; margin-top: 0rem\">\r\n            2021\r\n          </div>\r\n        </div>\r\n        <div class=\"mind\">\r\n          <div\r\n            ref=\"mind\"\r\n            style=\"width: 100%; height: 100%; margin-left: 0rem\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n      <div class=\"right\">\r\n        <div class=\"tag_num\">\r\n          <div\r\n            ref=\"tag_num\"\r\n            style=\"\r\n              width: 100%;\r\n              height: 100%;\r\n              margin-left: 0rem;\r\n              margin-top: 0.5rem;\r\n            \"\r\n          ></div>\r\n        </div>\r\n        <div class=\"wordCloud\">\r\n          <svg\r\n            :width=\"nowSize(width)\"\r\n            :height=\"nowSize(height)\"\r\n            style=\"margin-top: 0.5rem\"\r\n          >\r\n            <a\r\n              class=\"fontA\"\r\n              :style=\"{ fill: tag.color, 'font-weight': 'bold' }\"\r\n              v-for=\"(tag, index) in tags\"\r\n              :key=\"`tag-${index}`\"\r\n            >\r\n              <text\r\n                :id=\"tag.id\"\r\n                :x=\"nowSize(tag.x)\"\r\n                :y=\"nowSize(tag.y)\"\r\n                :font-size=\"\r\n                  nowSize(18) * (nowSize(600) / (nowSize(600) - nowSize(tag.z)))\r\n                \"\r\n                :fill-opacity=\"(nowSize(400) + nowSize(tag.z)) / nowSize(400)\"\r\n                @mousemove=\"listenerMove($event)\"\r\n                @mouseout=\"listenerOut($event)\"\r\n                @click=\"clickToPage\"\r\n              >\r\n                {{ tag.text }}\r\n              </text>\r\n            </a>\r\n          </svg>\r\n        </div>\r\n        <div class=\"rank_speed\">\r\n          <div style=\"width: 100%; height: 0.8333rem\"></div>\r\n          <div class=\"speed_content\">\r\n            <div v-for=\"(item, i) in rank_speed_list\" :key=\"i\">\r\n              <div class=\"list_item\" :class=\"{ as_first: i == 0 }\">\r\n                <div class=\"item_rank\">{{ item.rank }}</div>\r\n                <div\r\n                  class=\"item_title\"\r\n                  :class=\"{ item_title_content: i !== 0 }\"\r\n                >\r\n                  {{ item.title }}\r\n                </div>\r\n                <div class=\"item_speed\">{{ item.speed }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport test_mind_data from \"../assets/Shi/test_mind_data.json\";\r\nimport word_cloud_data from \"../assets/Sheng/item_data/word_cloud_3ddata.json\";\r\nimport speed_data from \"../assets/Shi/speed_data.json\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      cur_info: {\r\n        year: \"2017\",\r\n        title: \"政治\",\r\n        region: \"阳泉\",\r\n        region_data: \"\",\r\n      },\r\n      locate_data_url: {\r\n        晋中: \"jinzhong.json\",\r\n        吕梁: \"lvliang.json\",\r\n        朔州: \"shuozhou.json\",\r\n        太原: \"taiyuan.json\",\r\n        阳泉: \"yangquan.json\",\r\n      },\r\n      news_value: 0,\r\n      news_list: [\r\n        {\r\n          url: \"http://www.gov.cn/xinwen/2022-05/01/5688367/images/874baddfbc4c43809aae929bf2a190a2.JPG\",\r\n        },\r\n        {\r\n          url: \"http://www.gov.cn/xinwen/2022-05/01/5688367/images/441dbcc82f714ce58365ab925ac4c783.JPG\",\r\n        },\r\n        {\r\n          url: \"http://www.gov.cn/xinwen/2022-05/01/5688367/images/89106ba8a3a6455e8d323ba63e307cf0.JPG\",\r\n        },\r\n      ],\r\n      time_select_value: 0,\r\n      rank_speed_list: [\r\n        {\r\n          rank: \"排名\",\r\n          title: \"主题\",\r\n          speed: \"响应时间\",\r\n        },\r\n        {\r\n          rank: 1,\r\n          title: \"政治\",\r\n          speed: 0.2,\r\n        },\r\n        {\r\n          rank: \"2\",\r\n          title: \"民生\",\r\n          speed: 1.9,\r\n        },\r\n      ],\r\n      policy_content_list: [\r\n        {\r\n          title:'金融支持文化旅游产业纾困发展',\r\n          content:'5月13日，太原市金融支持文化旅游产业纾困发展政银企对接会召开，副市长高德胜出席并讲话。'\r\n        },\r\n        {\r\n          title:'坚持正确舆论导向 发挥网媒宣传优势',\r\n          content:'5月13日，全市网络正能量宣传暨互联网行业党建工作会召开，全面总结去年工作，部署今年重点任务。市委常委、宣传部部长杨继承出席并讲话。 '\r\n        },\r\n        {\r\n          title:'市委召开今年第二次党外代表人士座谈会',\r\n          content:'5月12日，市委召开2022年度第二次党外代表人士座谈会，通报太忻经济一体化发展太原区建设情况并征求意见建议。'\r\n        },\r\n        {\r\n          title:'春植改秋植 市民可申请退款',\r\n          content:'5月13日，记者从市园林局获悉，受疫情影响，原定于4月16日至17日开展的2022年群众纪念林植树活动，经两次延期后最终决定暂时取消，待金秋十月再择时开展。'\r\n        },\r\n        {\r\n          title:'清仓见底促增收 固本强基谋发展',\r\n          content:'5月11日，市委副书记、政法委书记张韬在娄烦县调研壮大村集体经济和农村集体资产“清化收”工作，并召开座谈会。副市长程永平参加。 '\r\n        },\r\n        {\r\n          title:'唱响乡村振兴曲 走进古交市岔口乡关头村',\r\n          content:'晋绥八分区是抗日战争时期晋西北的南大门，是通往延安、晋察冀、晋冀鲁豫、华东、华中等抗日根据地的交通要道。'\r\n        },\r\n      ],\r\n      orgin_dataAxis: [\"政治\", \"经济\", \"资源\", \"生产\", \"文化\", \"民生\"],\r\n      width: 576,\r\n      height: 300,\r\n      tagsNum: 0, //标签数量\r\n      RADIUS: 110, //球的半径\r\n      speedX: Math.PI / 360 / 0.5, //球一帧绕x轴旋转的角度\r\n      speedY: Math.PI / 360 / 0.5, //球-帧绕y轴旋转的角度\r\n      tags: [],\r\n      data: word_cloud_data[\"value\"],\r\n      timer: null,\r\n    };\r\n  },\r\n  created() {\r\n    this.initData();\r\n    this.cur_info.region = this.$route.query.region;\r\n  },\r\n  mounted() {\r\n    this.set_region_map();\r\n    this.set_policy_detail();\r\n    this.set_num_tag();\r\n    this.set_rank_list();\r\n    window.addEventListener(\"resize\", this.screenAdapter);\r\n    this.screenAdapter();\r\n  },\r\n  methods: {\r\n    get_time_change(new_time) {\r\n      //时间变化后\r\n      //console.log(new_time.toString());\r\n      new_time = new_time.toString();\r\n      if (new_time in speed_data[this.cur_info.region] == false) {\r\n        alert(\"这里没有数据\");\r\n        return;\r\n      }\r\n      this.cur_info.year = new_time;\r\n      this.set_num_tag();\r\n      this.set_rank_list();\r\n      this.screenAdapter();\r\n      //this.cur_info.year = new_time.toString();\r\n      //this.set_num_tag();\r\n      //this.set_speed_tag();\r\n    },\r\n    async set_region_map() {\r\n      // await this.$axios({\r\n      //   url: \"https://geo.datav.aliyun.com/areas_v3/bound/370200_full.json\",\r\n      //   method: \"get\",\r\n      // }).then((res) => {\r\n      // });\r\n      // this.cur_info.region_data = res.data;\r\n      this.cur_info.region_data = require(\"../assets/Shi/map/\" +\r\n        this.locate_data_url[this.cur_info.region]);\r\n      this.$echarts.registerMap(\r\n        this.cur_info.region,\r\n        this.cur_info.region_data\r\n      );\r\n      let _data = this.cur_info.region_data.features,\r\n        scar_data = [];\r\n      for (let i in _data) {\r\n        let x = _data[i].properties.center[0],\r\n          y = _data[i].properties.center[1],\r\n          z = _data[i].properties.name;\r\n        scar_data.push([x, y, z]);\r\n      }\r\n      this.speed_region_Chart = this.$echarts.init(this.$refs.region);\r\n      let layoutSize = \"600\",\r\n        aspectScale = 687 / 415;\r\n      let speed_region_option = {\r\n        geo: {\r\n          map: this.cur_info.region,\r\n          z: 2,\r\n          aspectScale: 1,\r\n          layoutCenter: [\"50%\", \"50%\"], //地图位置\r\n          //layoutSize: layoutSize,\r\n          zoom: 1, //当前视角的缩放比例\r\n          scaleLimit: {\r\n            //滚轮缩放的极限控制\r\n            min: 1,\r\n            max: 2,\r\n          },\r\n          label: {\r\n            normal: {\r\n              show: false,\r\n              textStyle: {\r\n                color: \"#FFFFFF\",\r\n                fontSize: 18,\r\n              },\r\n            },\r\n            emphasis: {\r\n              show: false,\r\n              textStyle: {\r\n                color: \"#FFFFFF\",\r\n                fontSize: 18,\r\n              },\r\n            },\r\n          },\r\n          itemStyle: {\r\n            normal: {\r\n              shadowColor: \"rgba(21,55,112,255)\",\r\n              shadowOffsetX: 10,\r\n              shadowOffsetY: 10,\r\n              areaColor: \"rgba(24,48,82,255)\",\r\n              borderColor: \"rgba(84,113,166)\",\r\n              borderWidth: 1.5,\r\n            },\r\n            emphasis: {\r\n              areaColor: \"rgba(7,69,162)\",\r\n            },\r\n          },\r\n        },\r\n\r\n        series: [\r\n          {\r\n            type: \"map\",\r\n            mapType: this.cur_info.region,\r\n            aspectScale: 1,\r\n            zoom: 1,\r\n            //layoutSize: layoutSize,\r\n            z: 1,\r\n            layoutCenter: [\"50%\", \"50%\"], //地图位置\r\n            label: {\r\n              normal: {\r\n                show: false,\r\n              },\r\n              emphasis: {\r\n                show: false,\r\n              },\r\n            },\r\n            itemStyle: {\r\n              normal: {\r\n                shadowColor: \"rgba(22,57,89,255)\",\r\n                shadowOffsetX: 20,\r\n                shadowOffsetY: 20,\r\n                //areaColor: \"rgba(22,57,89,255)\",\r\n                borderColor: \"#4a75ff\",\r\n                borderWidth: 7,\r\n              },\r\n              emphasis: {\r\n                areaColor: \"rgba(22,57,89,0)\",\r\n              },\r\n            },\r\n          },\r\n        ],\r\n      };\r\n      this.speed_region_Chart.setOption(speed_region_option);\r\n    },\r\n    async set_policy_detail() {\r\n      let option = {\r\n        tooltip: {\r\n          trigger: \"item\",\r\n          triggerOn: \"mousemove\",\r\n        },\r\n        series: [\r\n          {\r\n            type: \"tree\",\r\n            data: [test_mind_data],\r\n            top: \"1%\",\r\n            left: \"7%\",\r\n            bottom: \"1%\",\r\n            right: \"20%\",\r\n            symbolSize: 10,\r\n            label: {\r\n              position: \"left\",\r\n              verticalAlign: \"middle\",\r\n              align: \"right\",\r\n              fontSize: 10,\r\n              color: \"#FFFFFF\",\r\n            },\r\n            leaves: {\r\n              label: {\r\n                position: \"right\",\r\n                verticalAlign: \"middle\",\r\n                align: \"left\",\r\n              },\r\n            },\r\n            emphasis: {\r\n              focus: \"ancestor\",\r\n            },\r\n            expandAndCollapse: true,\r\n            animationDuration: 550,\r\n            animationDurationUpdate: 750,\r\n          },\r\n        ],\r\n      };\r\n      this.detail_chart = this.$echarts.init(this.$refs.mind);\r\n      this.detail_chart.setOption(option);\r\n    },\r\n    async set_num_tag() {\r\n      // prettier-ignore\r\n      let dataAxis = [];\r\n      let data = [];\r\n      for (let i in this.orgin_dataAxis) {\r\n        if (\r\n          this.orgin_dataAxis[i] in\r\n            speed_data[this.cur_info.region][this.cur_info.year] ==\r\n          false\r\n        )\r\n          continue;\r\n        dataAxis.push(this.orgin_dataAxis[i]);\r\n        data.push(\r\n          speed_data[this.cur_info.region][this.cur_info.year][\r\n            this.orgin_dataAxis[i]\r\n          ][\"num\"]\r\n        );\r\n      }\r\n      // prettier-ignore\r\n      let yMax = 500;\r\n      let dataShadow = [];\r\n      for (let i = 0; i < data.length; i++) {\r\n        dataShadow.push(yMax);\r\n      }\r\n      let echarts = this.$echarts;\r\n      let option = {\r\n        xAxis: {\r\n          name: \"主题\",\r\n          data: dataAxis,\r\n          axisLabel: {\r\n            inside: true,\r\n            color: \"#FFFFFF\",\r\n          },\r\n          axisTick: {\r\n            show: false,\r\n          },\r\n          axisLine: {\r\n            show: false,\r\n          },\r\n          nameTextStyle: {\r\n            color: \"rgba(255,255,255)\",\r\n            fontSize: 20,\r\n          },\r\n\r\n          z: 10,\r\n        },\r\n        yAxis: {\r\n          name: \"个数\",\r\n          axisLine: {\r\n            show: false,\r\n          },\r\n          axisTick: {\r\n            show: false,\r\n          },\r\n          nameTextStyle: {\r\n            color: \"rgba(255,255,255)\",\r\n            fontSize: 20,\r\n          },\r\n\r\n          axisLabel: {\r\n            textStyle: {\r\n              color: \"rgba(255,255,255)\",\r\n            },\r\n          },\r\n        },\r\n        dataZoom: [\r\n          {\r\n            type: \"inside\",\r\n          },\r\n        ],\r\n        series: [\r\n          {\r\n            type: \"bar\",\r\n            showBackground: true,\r\n            itemStyle: {\r\n              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n                { offset: 0, color: \"#83bff6\" },\r\n                { offset: 0.5, color: \"#188df0\" },\r\n                { offset: 1, color: \"#188df0\" },\r\n              ]),\r\n            },\r\n            emphasis: {\r\n              itemStyle: {\r\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n                  { offset: 0, color: \"#2378f7\" },\r\n                  { offset: 0.7, color: \"#2378f7\" },\r\n                  { offset: 1, color: \"#83bff6\" },\r\n                ]),\r\n              },\r\n            },\r\n            data: data,\r\n          },\r\n        ],\r\n      };\r\n      // Enable data zoom when user click bar.\r\n      const zoomSize = 3;\r\n      this.num_tag_chart = this.$echarts.init(this.$refs.tag_num);\r\n      let that = this;\r\n      this.num_tag_chart.on(\"click\", function (params) {\r\n        let h = parseInt(Math.max(params.dataIndex - zoomSize / 2, 0));\r\n        let t = parseInt(\r\n          Math.min(params.dataIndex + zoomSize / 2, data.length - 1)\r\n        );\r\n        console.log(h, t);\r\n        that.num_tag_chart.dispatchAction({\r\n          type: \"dataZoom\",\r\n          startValue: dataAxis[h],\r\n          endValue: dataAxis[t],\r\n        });\r\n      });\r\n      this.num_tag_chart.setOption(option);\r\n    },\r\n    async set_rank_list() {\r\n      let rank_speed_list = [];\r\n      let tmp = this.rank_speed_list[0];\r\n      this.rank_speed_list = [];\r\n      this.rank_speed_list.push(tmp);\r\n      let cur_data = speed_data[this.cur_info.region][this.cur_info.year];\r\n      let rank_num = 1;\r\n      for (let k in cur_data) {\r\n        if(k=='avg')continue\r\n        rank_speed_list.push({\r\n          rank: 0,\r\n          title: k,\r\n          speed: Math.floor(cur_data[k][\"avg\"] * 100) / 100 ,\r\n          \r\n        });\r\n      }\r\n      rank_speed_list = rank_speed_list.sort((a, b) => {\r\n        return a.speed - b.speed;\r\n      });\r\n      for (let i in rank_speed_list) {\r\n        rank_speed_list[i].rank = rank_num;\r\n        this.rank_speed_list.push(rank_speed_list[i]);\r\n        rank_num++;\r\n      }\r\n    },\r\n    screenAdapter() {\r\n      let that = this;\r\n      setTimeout(function () {\r\n        if (that.detail_chart) {\r\n          let option = {\r\n            series: [\r\n              {\r\n                symbolSize: that.nowSize(10),\r\n                label: {\r\n                  fontSize: that.nowSize(10),\r\n                },\r\n              },\r\n            ],\r\n          };\r\n          that.detail_chart.setOption(option);\r\n          that.detail_chart.resize();\r\n        }\r\n      }, 300);\r\n      setTimeout(function () {\r\n        if (that.speed_region_Chart) {\r\n          let option = {\r\n            geo: {\r\n              itemStyle: {\r\n                normal: {\r\n                  shadowOffsetX: that.nowSize(10),\r\n                  shadowOffsetY: that.nowSize(10),\r\n                  borderWidth: that.nowSize(1.5),\r\n                },\r\n              },\r\n            },\r\n            series: [\r\n              {\r\n                itemStyle: {\r\n                  normal: {\r\n                    shadowOffsetX: that.nowSize(20),\r\n                    shadowOffsetY: that.nowSize(20),\r\n                    borderWidth: that.nowSize(7),\r\n                  },\r\n                },\r\n              },\r\n            ],\r\n          };\r\n          that.speed_region_Chart.setOption(option);\r\n          that.speed_region_Chart.resize();\r\n        }\r\n      }, 300);\r\n      setTimeout(function () {\r\n        if (that.num_tag_chart) {\r\n          let option = {\r\n            xAxis: {\r\n              nameTextStyle: {\r\n                fontSize: that.nowSize(20),\r\n              },\r\n            },\r\n            yAxis: {\r\n              nameTextStyle: {\r\n                fontSize: that.nowSize(20),\r\n              },\r\n            },\r\n          };\r\n          that.num_tag_chart.setOption(option);\r\n          that.num_tag_chart.resize();\r\n        }\r\n      }, 300);\r\n    },\r\n\r\n    initData() {\r\n      //初始化标签位置\r\n      let tags = [];\r\n      this.tagsNum = this.data.length;\r\n      for (let i = 0; i < this.data.length; i++) {\r\n        let tag = {};\r\n        let k = -1 + (2 * (i + 1) - 1) / this.tagsNum;\r\n        let a = Math.acos(k);\r\n        let b = a * Math.sqrt(this.tagsNum * Math.PI); //计算标签相对于球心的角度\r\n        tag.text = this.data[i];\r\n        tag.x = this.CX + this.RADIUS * Math.sin(a) * Math.cos(b); //根据标签角度求出标签的x,y,z坐标\r\n        tag.y = this.CY + this.RADIUS * Math.sin(a) * Math.sin(b);\r\n        tag.z = this.RADIUS * Math.cos(a);\r\n        tag.id = i; // 给标签添加id\r\n        tag.color =\r\n          \"rgb(\" +\r\n          [\r\n            Math.round(Math.random() * 254),\r\n            Math.round(Math.random() * 254),\r\n            Math.round(Math.random() * 254),\r\n          ].join(\",\") +\r\n          \")\";\r\n        tags.push(tag);\r\n        // console.log(tag);\r\n      }\r\n      this.tags = tags; //让vue替我们完成视图更新\r\n    },\r\n    // 纵向旋转\r\n    rotateX(angleX) {\r\n      var cos = Math.cos(angleX);\r\n      var sin = Math.sin(angleX);\r\n      for (let tag of this.tags) {\r\n        var y1 = (tag.y - this.CY) * cos - tag.z * sin + this.CY;\r\n        var z1 = tag.z * cos + (tag.y - this.CY) * sin;\r\n        tag.y = y1;\r\n        tag.z = z1;\r\n      }\r\n    },\r\n    // 横向旋转\r\n    rotateY(angleY) {\r\n      var cos = Math.cos(angleY);\r\n      var sin = Math.sin(angleY);\r\n      for (let tag of this.tags) {\r\n        var x1 = (tag.x - this.CX) * cos - tag.z * sin + this.CX;\r\n        var z1 = tag.z * cos + (tag.x - this.CX) * sin;\r\n        tag.x = x1;\r\n        tag.z = z1;\r\n      }\r\n    },\r\n    // 运动函数\r\n    async runTags() {\r\n      if (typeof this.timer === \"number\") {\r\n        clearInterval(this.timer);\r\n        this.timer = null;\r\n      }\r\n      let timer = setInterval(() => {\r\n        this.rotateX(this.speedX);\r\n        this.rotateY(this.speedY);\r\n      }, 17);\r\n      this.timer = timer;\r\n    },\r\n    // 监听移入事件\r\n    listenerMove(e) {\r\n      if (e.target.id) {\r\n        clearInterval(this.timer);\r\n      }\r\n    },\r\n    // 监听移出事件\r\n    listenerOut(e) {\r\n      if (e.target.id) {\r\n        this.runTags();\r\n      }\r\n    },\r\n    // 点击事件\r\n    clickToPage() {},\r\n    //up----------------------------------------------------------set word_cloud\r\n  },\r\n  beforeDestroy() {\r\n    if (this.speed_region_Chart) {\r\n      this.speed_region_Chart.dispose();\r\n      this.speed_region_Chart = null;\r\n    }\r\n    if (this.detail_chart) {\r\n      this.detail_chart.dispose();\r\n      this.detail_chart = null;\r\n    }\r\n    if (this.word_cloud_Chart) {\r\n      this.word_cloud_Chart.dispose();\r\n      this.word_cloud_Chart = null;\r\n    }\r\n    if (this.num_tag_chart) {\r\n      this.num_tag_chart.dispose();\r\n      this.num_tag_chart = null;\r\n    }\r\n    window.removeEventListener(\"resize\", this.screenAdapter);\r\n  },\r\n  computed: {\r\n    CX() {\r\n      //球心x坐标\r\n      return this.width / 2;\r\n    },\r\n    CY() {\r\n      //球心y坐标\r\n      return this.height / 2;\r\n    },\r\n    nowSize() {\r\n      return function nowSize(val, initWidth = 1920) {\r\n        let nowClientWidth = document.documentElement.clientWidth;\r\n        return val * (nowClientWidth / initWidth);\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.tag_num {\r\n  width: 100%;\r\n  height: 5.6667rem;\r\n  background: url(../assets/Shi/tag_num.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center top;\r\n}\r\n.wordCloud {\r\n  width: 100%;\r\n  margin-top: 0.2rem;\r\n  height: 5.0333rem;\r\n  background: url(../assets/Shi/3dwordCloud.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center top;\r\n}\r\n.rank_speed {\r\n  width: 100%;\r\n  margin-top: 0.2rem;\r\n  margin-left: 0.1rem;\r\n  height: 5.45rem;\r\n  background: url(../assets/Shi/rank_speed.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center top;\r\n  display: flex;\r\n  flex-flow: column;\r\n  .speed_content {\r\n    margin-left: 0.5333rem;\r\n    margin-top: 0.3333rem;\r\n    line-height: 0.3333rem;\r\n    border-radius: 0.0833rem;\r\n    width: 8.15rem;\r\n    height: 3.5833rem;\r\n    background-color: rgba(64, 183, 246, 0.2);\r\n  }\r\n  .list_item {\r\n    display: flex;\r\n    width: 8.15rem;\r\n    margin-left: 1.4833rem;\r\n    margin-top: 0.1667rem;\r\n    .item_rank {\r\n      color: rgba(255, 255, 255, 100);\r\n      font-size: 0.3333rem;\r\n      text-align: left;\r\n      font-weight: bold;\r\n      width: 1.8333rem;\r\n      //font-family: SourceHanSansSC-regular;\r\n    }\r\n    .item_title {\r\n      color: rgba(161, 158, 158, 100);\r\n      font-size: 0.3333rem;\r\n      width: 1.4333rem+0.5167rem;\r\n      text-align: left;\r\n    }\r\n    .item_speed {\r\n      color: rgba(161, 158, 158, 100);\r\n      font-size: 0.3333rem;\r\n    }\r\n    .item_title_content {\r\n      color: rgba(231, 0, 0);\r\n      font-size: 0.3333rem;\r\n      width: 1.4333rem+0.5167rem;\r\n      text-align: left;\r\n      font-weight: bold;\r\n    }\r\n  }\r\n}\r\n.news_content {\r\n  .map_chart {\r\n    width: 11.4333rem;\r\n    height: 6.9167rem;\r\n    margin: 1.4833rem 0 0 0.3667rem;\r\n  }\r\n  .time {\r\n    width: 100%;\r\n    height: 0.4667rem;\r\n    margin-left: 1.3833rem;\r\n    margin-top: 0rem;\r\n    display: flex;\r\n    .time_select {\r\n      width: 8.2667rem;\r\n      height: 0.4667rem;\r\n      margin-top: 0.3333rem;\r\n    }\r\n  }\r\n  .mind {\r\n    width: 8.9667rem;\r\n    height: 6.5rem;\r\n    margin-left: 1.2833rem;\r\n  }\r\n  width: 12.25rem;\r\n  height: 15.7833rem;\r\n  margin-top: 1.9rem;\r\n  margin-left: 0.75rem;\r\n  background: url(../assets/Shi/news_content.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center top;\r\n  display: flex;\r\n  flex-flow: column;\r\n}\r\n.policy_content {\r\n  width: 8.1167rem;\r\n  height: 16.6167rem;\r\n  margin-top: 0.7167rem;\r\n  margin-left: 0.9rem;\r\n  background: url(../assets/Shi/policy_content.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center top;\r\n  .policy_item {\r\n    width: 7.4rem;\r\n    height: 2.1667rem;\r\n    border-radius: .0833rem;\r\n    background-color: rgba(64, 183, 246, 0.2);\r\n    margin-left: .3333rem;\r\n    margin-top: .2667rem;\r\n    display: flex;\r\n    .policy_picture {\r\n      width: 1.6667rem;\r\n      height: 1.3167rem;\r\n      background: url(../assets/Shi/policy_icon.png) no-repeat;\r\n      background-size: 100% 100%;\r\n      margin-left: .3667rem;\r\n      margin-top: .4333rem;\r\n    }\r\n    .policy_right_content {\r\n      //margin-left: 2.45rem;\r\n      display: flex;\r\n      flex-flow: column;\r\n      margin-left: .3667rem;\r\n      margin-top: .35rem;\r\n      .policy_title {\r\n        width: 2.6333rem;\r\n        height: .3667rem;\r\n        color: rgba(0, 0, 0, 0.85);\r\n        font-size: .2667rem;\r\n        font-family: PingFangSC-regular;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n      }\r\n      .policy_text {\r\n        width: 4.0833rem;\r\n        height: 1.1rem;        \r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        color: rgba(0, 0, 0, 0.65);\r\n        font-size: .2333rem;\r\n        text-align: left;\r\n        font-family: PingFangSC-regular;\r\n      }\r\n    }\r\n  }\r\n}\r\n.right {\r\n  margin-top: 1.15rem;\r\n  margin-left: 0.6rem;\r\n  width: 9.45rem;\r\n  height: 12.9167rem+4.7833rem;\r\n  display: flex;\r\n  flex-flow: column;\r\n\r\n  justify-content: flex-start;\r\n}\r\n\r\n.ShiBackground {\r\n  width: 32.2667rem;\r\n  height: 18.05rem;\r\n  background: url(https://ysr-data-view.oss-cn-hangzhou.aliyuncs.com/C778FA422F5F4FDB8043352BFEBFDC6B-6-2.png) no-repeat fixed;\r\n  background-size: 100% 100%;\r\n  overflow: hidden;\r\n  .title {\r\n    width: 32.2667rem;\r\n    height: 5.7167rem;\r\n    background: url(../assets/main_page_title.png) no-repeat;\r\n    background-size: 100% 100%;\r\n    background-position: center top;\r\n  }\r\n  .content {\r\n    margin-top: -5.7167rem;\r\n    width: 32.2667rem;\r\n    height: 12.3333rem;\r\n    display: flex;\r\n  }\r\n}\r\n</style>\r\n","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\components\\MainPageLeft.vue",[],"C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\components\\MainPageRight.vue",[],"C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\components\\echarts_test.vue",["66"],"<template>\r\n    <div>\r\n         <div ref=\"main\" style=\"width: 600px;height:400px;\"></div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {}\r\n    },\r\n    mounted() {\r\n    // 基于准备好的dom，初始化echarts实例\r\n        console.log(this.$refs.main)\r\n        this.myChart = this.$echarts.init(this.$refs.main)\r\n\t\t// 指定图表的配置项和数据\r\n        this.myChart.setOption({\r\n            title: {\r\n                text: '联系',\r\n            },\r\n            tooltip: {},\r\n            xAxis: {\r\n                data: ['一', '二', '三', '四', '五', '六']\r\n            },\r\n            yAxis: {},\r\n            series: [{\r\n                name: '人数',\r\n                type: 'bar',\r\n                data: [45, 46, 56, 34, 47, 48]\r\n            }]\r\n        })\r\n    },\r\n}\r\n\r\n</script>","C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\components\\main_support_right.vue",[],"C:\\Users\\Administrator\\Desktop\\data_view\\my_project\\vue2_app\\myapp\\src\\components\\MainPageRightMap.vue",["67"],"<template>\r\n  <div class=\"h-3\">\r\n    <div ref=\"myEchart\" style=\"width: 20.5167rem; height: 13.4667rem\"></div>\r\n    <div class=\"time_content\">\r\n      <div class=\"Timeline\">\r\n        <div class=\"timeaxis\">\r\n          <div v-for=\"(item, i) in list\" :key=\"i\">\r\n            <div class=\"timeaxis-box\">\r\n              <div\r\n                class=\"timeaxis-topText\"\r\n                :class=\"{ 'bd-empty': i == list.length - 1 }\"\r\n              ></div>\r\n              <div\r\n                class=\"circular\"\r\n                @click=\"time_change(item, i)\"\r\n                :class=\"{ circular_click: item.clicked }\"\r\n              ></div>\r\n              <div class=\"timeaxis-bootomText\">\r\n                <div class=\"text\">{{ item.standard }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport china from \"../assets/map/china.json\";\r\nimport speed_average_data from \"../assets/Sheng/item_data/speed_average.json\";\r\nimport main_tooltip from \"../assets/main_time/main_tooltip.json\";\r\nexport default {\r\n  props: {\r\n    title_change: {\r\n      type: String,\r\n      default: \"政治\",\r\n    },\r\n  },\r\n  watch: {\r\n    title_change(new_val, old_val) {\r\n      this.cur_info.title = new_val;\r\n      this.set_china_map();\r\n    },\r\n    hookTooltip: {\r\n      handler(new_val, old_val) {\r\n        //console.log(new_val, old_val, \"---------watch\");\r\n        let tooltipButton = document.querySelectorAll(\"#main_tooltip_click\");\r\n        // 通过addEventListener注册事件\r\n        for (let i = 0; i < tooltipButton.length; i++) {\r\n          tooltipButton[i].addEventListener(\"click\", this.go_next_page);\r\n        }\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      cur_info: {\r\n        year: \"2017\",\r\n        title: \"政治\",\r\n        max: 0,\r\n        region: \"\",\r\n      },\r\n      list: [\r\n        {\r\n          clicked: true,\r\n          standard: \"2017\",\r\n        },\r\n        {\r\n          clicked: false,\r\n          standard: \"2018\",\r\n        },\r\n        {\r\n          clicked: false,\r\n          standard: \"2019\",\r\n        },\r\n        {\r\n          clicked: false,\r\n          standard: \"2020\",\r\n        },\r\n        {\r\n          clicked: false,\r\n          standard: \"2021\",\r\n        },\r\n      ],\r\n      hookTooltip: {},\r\n    };\r\n  },\r\n  methods: {\r\n    // 随机函数\r\n    randomValue() {\r\n      return Math.round(Math.random() * 1000);\r\n    },\r\n    time_change(x, id) {\r\n      this.cur_info.year = x.standard;\r\n      for (let i in this.list) {\r\n        this.list[i].clicked = false;\r\n      }\r\n      this.list[id].clicked = true;\r\n      this.set_china_map();\r\n    },\r\n    go_next_page() {\r\n      console.log(this.cur_info.region);\r\n      this.$router.push({\r\n        name: \"ShengView\",\r\n        query: {\r\n          region: this.cur_info.region,\r\n        },\r\n      });\r\n    },\r\n    async set_china_map() {\r\n      if (!this.myChart) {\r\n        this.myChart = this.$echarts.init(this.$refs.myEchart);\r\n      }\r\n      this.layoutSize = \"150%\";\r\n      let that = this;\r\n      let _data = china.features,\r\n        scar_data = [];\r\n      for (let i in _data) {\r\n        let x = _data[i].properties.cp[0],\r\n          y = _data[i].properties.cp[1],\r\n          z = _data[i].properties.name;\r\n        scar_data.push([x, y, z]);\r\n      }\r\n      for (let name_l in speed_average_data[\"scar\"]) {\r\n        let cur = speed_average_data[\"scar\"][name_l];\r\n        if (this.cur_info.title in cur == false) continue;\r\n\r\n        let t = parseInt(this.cur_info.year) - 2017;\r\n        if (t in cur[this.cur_info.title] == false) continue;\r\n        this.cur_info.max = Math.max(\r\n          this.cur_info.max,\r\n          cur[this.cur_info.title][t][1]\r\n        );\r\n      }\r\n      if (this.cur_info.max == 0) this.cur_info.max = 1;\r\n      let options = {\r\n        tooltip: {\r\n          triggerOn: \"click\",\r\n          enterable: true,\r\n          confine: true,\r\n          backgroundColor: \"rgba(255,255,255,0)\",\r\n          borderColor: \"rgba(0,0,0,0)\",\r\n          formatter: function (params) {\r\n            that.hookTooltip = params;\r\n            const default_style = `\r\n            <div\r\n            style=\"\r\n            width: 1.6667rem;\r\n            height:.5rem;\r\n            font-size:.4667rem;            \r\n            color:rgba(255,255,255)\">\r\n            还没拿到该省此年份的数据呢</div>\r\n            `;\r\n            if (params.name in main_tooltip == false) return default_style;\r\n            if (that.cur_info.year in main_tooltip[params.name] == false)\r\n              return default_style;\r\n            let regionName = \"\";\r\n\r\n            if (that.region_info_interval)\r\n              clearInterval(that.region_info_interval);\r\n            that.region_info_interval = setInterval(function () {\r\n              if (document.getElementById(\"main_page_map_tooltip\")) {\r\n                if (params.name !== regionName) {\r\n                  regionName = params.name;\r\n                  that.cur_info.region = regionName;\r\n                  if (that.toolChart) {\r\n                    that.toolChart.dispose();\r\n                    that.toolChart = null;\r\n                  }\r\n                  that.toolChart = that.$echarts.init(\r\n                    document.getElementById(\"main_page_map_tooltip\")\r\n                  );\r\n                  let nowClientWidth = document.documentElement.clientWidth;\r\n                  //换算方法;\r\n                  let nowSize = function nowSize(val, initWidth = 1920) {\r\n                    return val * (nowClientWidth / initWidth);\r\n                  };\r\n                  const treemapOption = {\r\n                    series: [\r\n                      {\r\n                        type: \"treemap\",\r\n                        id: \"echarts-package-size\",\r\n                        animationDurationUpdate: 1000,\r\n                        roam: false,\r\n                        nodeClick: undefined,\r\n                        data: main_tooltip[regionName][that.cur_info.year],\r\n                        universalTransition: true,\r\n                        label: {\r\n                          show: true,\r\n                          fontSize: nowSize(24),\r\n                        },\r\n                        breadcrumb: {\r\n                          show: false,\r\n                        },\r\n                      },\r\n                    ],\r\n                  };\r\n                  const sunburstOption = {\r\n                    series: [\r\n                      {\r\n                        type: \"sunburst\",\r\n                        id: \"echarts-package-size\",\r\n                        radius: [\"10%\", \"90%\"],\r\n                        animationDurationUpdate: 1000,\r\n                        nodeClick: undefined,\r\n                        data: main_tooltip[regionName][that.cur_info.year],\r\n                        universalTransition: true,\r\n                        itemStyle: {\r\n                          borderWidth: nowSize(1),\r\n                          borderColor: \"rgba(255,255,255,.5)\",\r\n                        },\r\n                        label: {\r\n                          show: true,\r\n                          fontSize: nowSize(14),\r\n                          color: \"rgba(255,255,255)\",\r\n                        },\r\n                      },\r\n                    ],\r\n                  };\r\n                  let currentOption = treemapOption;\r\n                  that.toolChart.setOption(currentOption);\r\n                  clearInterval(that.toolChart_interval);\r\n                  that.toolChart_interval = setInterval(function () {\r\n                    currentOption =\r\n                      currentOption === treemapOption\r\n                        ? sunburstOption\r\n                        : treemapOption;\r\n                    that.toolChart.setOption(currentOption);\r\n                  }, 3000);\r\n                  that.toolChart.on(\"mouseover\", function () {\r\n                    clearInterval(that.toolChart_interval);\r\n                  });\r\n                  that.toolChart.on(\"mouseout\", function () {\r\n                    that.toolChart_interval = setInterval(function () {\r\n                      currentOption =\r\n                        currentOption === treemapOption\r\n                          ? sunburstOption\r\n                          : treemapOption;\r\n                      that.toolChart.setOption(currentOption);\r\n                    }, 3000);\r\n                  });\r\n                }\r\n              }\r\n            }, 500);\r\n            return `\r\n            <div class=\"main_tooltip\">\r\n              <div class=\"up_span\">\r\n\r\n              </div>\r\n              <div id=\"main_page_map_tooltip\" class=\"chart\">\r\n\r\n              </div>\r\n              \r\n              <div class=\"bottom_route\">\r\n                <div class=\"text\">\r\n                查看该省详细信息\r\n                </div>\r\n                <div id=\"main_tooltip_click\" class=\"icon\">\r\n\r\n                </div>\r\n              </div>\r\n            </div>\r\n            `;\r\n          }, //数据格式化\r\n        },\r\n\r\n        geo: {\r\n          map: \"china\",\r\n          aspectScale: 1,\r\n          layoutCenter: [\"50%\", \"50%\"], //地图位置\r\n          layoutSize: this.layoutSize,\r\n          label: {\r\n            normal: {\r\n              show: false,\r\n            },\r\n            emphasis: {\r\n              show: false,\r\n            },\r\n          },\r\n          itemStyle: {\r\n            normal: {\r\n              shadowColor: \"#276fce\",\r\n              shadowOffsetX: 0,\r\n              shadowOffsetY: 15,\r\n              opacity: 0.5,\r\n            },\r\n            emphasis: {\r\n              areaColor: \"#276fce\",\r\n            },\r\n          },\r\n        },\r\n        series: [\r\n          // 常规地图\r\n          {\r\n            type: \"map\",\r\n            mapType: \"china\",\r\n            aspectScale: 1,\r\n            layoutCenter: [\"50%\", \"50%\"], //地图位置\r\n            layoutSize: this.layoutSize,\r\n            zoom: 1, //当前视角的缩放比例\r\n            // roam: true, //是否开启平游或缩放\r\n            scaleLimit: {\r\n              //滚轮缩放的极限控制\r\n              min: 1,\r\n              max: 2,\r\n            },\r\n            label: {\r\n              normal: {\r\n                show: true,\r\n                textStyle: {\r\n                  color: \"#FFFFFF\",\r\n                  fontSize: 18,\r\n                },\r\n                offset: [0, -20],\r\n              },\r\n              emphasis: {\r\n                show: true,\r\n                textStyle: {\r\n                  color: \"#FFFFFF\",\r\n                  fontSize: 18,\r\n                },\r\n                offset: [0, -20],\r\n              },\r\n            },\r\n            itemStyle: {\r\n              normal: {\r\n                areaColor: \"#0c274b\",\r\n                borderColor: \"#1cccff\",\r\n                borderWidth: 1.5,\r\n              },\r\n\r\n              emphasis: {\r\n                areaColor: \"#02102b\",\r\n              },\r\n            },\r\n          },\r\n          {\r\n            show: true,\r\n            type: \"effectScatter\",\r\n            symbolSize: function (params) {\r\n              //\r\n              let t = parseInt(that.cur_info.year) - 2017;\r\n              if (params[2] in speed_average_data[\"scar\"] == false) return 0;\r\n              if (\r\n                that.cur_info.title in speed_average_data[\"scar\"][params[2]] ==\r\n                false\r\n              )\r\n                return 0;\r\n              if (\r\n                t in\r\n                  speed_average_data[\"scar\"][params[2]][that.cur_info.title] ==\r\n                false\r\n              )\r\n                return 0;\r\n              let x =\r\n                speed_average_data[\"scar\"][params[2]][that.cur_info.title][t];\r\n              let cur_v = (x[1] / that.cur_info.max) * 5 + 1;\r\n              //设置每个点的大小\r\n              return 30 / cur_v;\r\n            },\r\n            rippleEffect: {\r\n              // 涟漪特效相关配置。\r\n              scale: 4, // 控制涟漪大小\r\n            },\r\n            coordinateSystem: \"geo\", // series坐标系类型\r\n            data: scar_data,\r\n          },\r\n        ],\r\n      };\r\n      that.myChart.setOption(options);\r\n    },\r\n    screenAdapter() {\r\n      let that = this;\r\n      //当前视口宽度\r\n      setTimeout(function () {\r\n        if (that.myChart) {\r\n          let nowClientWidth = document.documentElement.clientWidth;\r\n          let nowSize = function nowSize(val, initWidth = 1920) {\r\n            return val * (nowClientWidth / initWidth);\r\n          };\r\n\r\n          let options = {\r\n            geo: {\r\n              itemStyle: {\r\n                normal: {\r\n                  shadowOffsetY: nowSize(15),\r\n                },\r\n              },\r\n            },\r\n            series: [\r\n              // 常规地图\r\n              {\r\n                label: {\r\n                  normal: {\r\n                    textStyle: {\r\n                      fontSize: nowSize(18),\r\n                    },\r\n                    offset: [0, nowSize(-20)],\r\n                  },\r\n                  emphasis: {\r\n                    textStyle: {\r\n                      fontSize: nowSize(18),\r\n                    },\r\n                    offset: [0, nowSize(-20)],\r\n                  },\r\n                },\r\n                itemStyle: {\r\n                  normal: {\r\n                    borderWidth: nowSize(1.5),\r\n                  },\r\n                },\r\n              },\r\n              {\r\n                show: true,\r\n                type: \"effectScatter\",\r\n                symbolSize: function (params) {\r\n                  //\r\n                  let t = parseInt(that.cur_info.year) - 2017;\r\n                  if (params[2] in speed_average_data[\"scar\"] == false)\r\n                    return 0;\r\n                  if (\r\n                    that.cur_info.title in\r\n                      speed_average_data[\"scar\"][params[2]] ==\r\n                    false\r\n                  )\r\n                    return 0;\r\n                  if (\r\n                    t in\r\n                      speed_average_data[\"scar\"][params[2]][\r\n                        that.cur_info.title\r\n                      ] ==\r\n                    false\r\n                  )\r\n                    return 0;\r\n                  let x =\r\n                    speed_average_data[\"scar\"][params[2]][that.cur_info.title][\r\n                      t\r\n                    ];\r\n                  let cur_v = (x[1] / that.cur_info.max) * 5 + 1;\r\n                  let nowClientWidth = document.documentElement.clientWidth;\r\n                  let nowSize = function nowSize(val, initWidth = 1920) {\r\n                    return val * (nowClientWidth / initWidth);\r\n                  };\r\n                  //设置每个点的大小\r\n                  return nowSize(30) / cur_v;\r\n                },\r\n                rippleEffect: {\r\n                  // 涟漪特效相关配置。\r\n                  scale: nowSize(4), // 控制涟漪大小\r\n                },\r\n              },\r\n            ],\r\n          };\r\n          that.myChart.setOption(options);\r\n          that.myChart.resize();\r\n        }\r\n      }, 300);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$echarts.registerMap(\"china\", china);\r\n    this.set_china_map();\r\n    window.addEventListener(\"resize\", this.screenAdapter);\r\n  },\r\n  beforeDestroy() {\r\n    if (this.myChart) {\r\n      this.myChart.dispose();\r\n      this.myChart = null;\r\n    }\r\n    if (this.toolChart) {\r\n      this.toolChart.dispose();\r\n      this.toolChart = null;\r\n    }\r\n    if (this.region_info_interval) clearInterval(this.region_info_interval);\r\n    if (this.toolChart_interval) clearInterval(this.toolChart_interval);\r\n    window.removeEventListener(\"resize\", this.screenAdapter);\r\n  },\r\n};\r\n// 基于准备好的dom，初始化echarts实例\r\n</script>\r\n<style lang=\"less\">\r\n/*懒加载图标动画*/\r\n.main_tooltip {\r\n  width: 16.8rem;\r\n  height: 10.9333rem;\r\n  background: url(../assets/main_time/main_tooltip.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  // background-position: center top;\r\n  // display: flex;\r\n  // flex-flow: column;\r\n  .up_span {\r\n    padding-top: 1.1667rem;\r\n    padding-right: 0.3333rem;\r\n    font-size: 0.5rem;\r\n  }\r\n  .bottom_route {\r\n    display: flex;\r\n    margin-left: 10.8333rem;\r\n    margin-top: -0.8333rem;\r\n    float: right;\r\n    .icon {\r\n      background: url(../assets/main_time/ze-arrow.png) no-repeat;\r\n      background-size: 100% 100%;\r\n      width: 0.4rem;\r\n      height: 0.4rem;\r\n      z-index: 999999;\r\n    }\r\n    .text {\r\n      //margin-top: -1.6667rem;\r\n      padding-right: 0.3333rem;\r\n      font-size: 0.5rem;\r\n      color: white;\r\n      text-align: right;\r\n      vertical-align: middle;\r\n    }\r\n  }\r\n\r\n  .chart {\r\n    width: 100%;\r\n    height: 9.7666rem;\r\n    justify-content: center;\r\n  }\r\n}\r\n.h-3 {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-flow: column;\r\n  .time_content {\r\n    width: 20.5167rem;\r\n    height: 0rem;\r\n    font-size: 0.3333rem;\r\n    z-index: 999999;\r\n    .Timeline {\r\n      width: 100%;\r\n      height: 100%;\r\n      margin-top: 0.6667rem;\r\n      .timeaxis {\r\n        height: 0.8333rem;\r\n        margin-top: 1.3333rem;\r\n        margin-left: 4em;\r\n        display: flex;\r\n        .timeaxis-box {\r\n          width: 5.5rem;\r\n          .circular {\r\n            width: 0.3333rem;\r\n            height: 0.3333rem;\r\n            border-radius: 50%;\r\n            background: #165dff;\r\n            //margin-bottom: -0.1667rem;\r\n            position: relative;\r\n            top: -0.1667rem;\r\n            box-shadow: 0rem 0rem 0.0833rem 0.0833rem #fff;\r\n          }\r\n          .circular:hover {\r\n            width: 0.5rem;\r\n            height: 0.5rem;\r\n            border-radius: 50%;\r\n            background: #ff1616;\r\n            //margin-bottom: -0.1667rem;\r\n            position: relative;\r\n            top: -0.25rem;\r\n            left: -0.0833rem;\r\n            box-shadow: 0rem 0rem 0.0833rem 0.0833rem #fff;\r\n          }\r\n          .circular_click {\r\n            width: 0.5rem;\r\n            height: 0.5rem;\r\n            border-radius: 50%;\r\n            background: #ff1616;\r\n            //margin-bottom: -0.1667rem;\r\n            position: relative;\r\n            top: -0.25rem;\r\n            left: -0.0833rem;\r\n            box-shadow: 0rem 0rem 0.0833rem 0.0833rem #fff;\r\n          }\r\n          .timeaxis-topText {\r\n            border-bottom: 0.0833rem solid #c9cdd4; //时间轴线的宽度和颜色\r\n            position: relative;\r\n          }\r\n          .bd-empty {\r\n            // border: 0;\r\n            //margin-top: .0833rem;\r\n            border-bottom: 0.0833rem solid #c9cdd4; //时间轴线的宽度和颜色\r\n            opacity: 0;\r\n            position: relative;\r\n          }\r\n          .timeaxis-bootomText {\r\n            position: relative;\r\n            .text {\r\n              position: absolute;\r\n              top: 0.1667rem;\r\n              font-size: 0.4667rem;\r\n              left: -0.3333rem;\r\n              color: #fff;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>",{"ruleId":"68","severity":1,"message":"69","line":485,"column":7,"nodeType":"70","messageId":"71","endLine":485,"endColumn":18},{"ruleId":"68","severity":1,"message":"69","line":642,"column":13,"nodeType":"70","messageId":"71","endLine":642,"endColumn":24},{"ruleId":"68","severity":1,"message":"69","line":735,"column":15,"nodeType":"70","messageId":"71","endLine":735,"endColumn":26},{"ruleId":"68","severity":1,"message":"69","line":475,"column":9,"nodeType":"70","messageId":"71","endLine":475,"endColumn":20},{"ruleId":"68","severity":1,"message":"69","line":13,"column":9,"nodeType":"70","messageId":"71","endLine":13,"endColumn":20},{"ruleId":"68","severity":1,"message":"69","line":102,"column":7,"nodeType":"70","messageId":"71","endLine":102,"endColumn":18},"no-console","Unexpected console statement.","MemberExpression","unexpected"]