{"ast":null,"code":"import Light from '../Light';\nimport Vector3 from '../math/Vector3';\n/**\n * @constructor clay.light.Spot\n * @extends clay.Light\n */\n\nvar SpotLight = Light.extend(\n/**@lends clay.light.Spot */\n{\n  /**\n   * @type {number}\n   */\n  range: 20,\n\n  /**\n   * @type {number}\n   */\n  umbraAngle: 30,\n\n  /**\n   * @type {number}\n   */\n  penumbraAngle: 45,\n\n  /**\n   * @type {number}\n   */\n  falloffFactor: 2.0,\n\n  /**\n   * @type {number}\n   */\n  shadowBias: 0.001,\n\n  /**\n   * @type {number}\n   */\n  shadowSlopeScale: 2.0\n}, {\n  type: 'SPOT_LIGHT',\n  uniformTemplates: {\n    spotLightPosition: {\n      type: '3f',\n      value: function (instance) {\n        return instance.getWorldPosition().array;\n      }\n    },\n    spotLightRange: {\n      type: '1f',\n      value: function (instance) {\n        return instance.range;\n      }\n    },\n    spotLightUmbraAngleCosine: {\n      type: '1f',\n      value: function (instance) {\n        return Math.cos(instance.umbraAngle * Math.PI / 180);\n      }\n    },\n    spotLightPenumbraAngleCosine: {\n      type: '1f',\n      value: function (instance) {\n        return Math.cos(instance.penumbraAngle * Math.PI / 180);\n      }\n    },\n    spotLightFalloffFactor: {\n      type: '1f',\n      value: function (instance) {\n        return instance.falloffFactor;\n      }\n    },\n    spotLightDirection: {\n      type: '3f',\n      value: function (instance) {\n        instance.__dir = instance.__dir || new Vector3(); // Direction is target to eye\n\n        return instance.__dir.copy(instance.worldTransform.z).negate().array;\n      }\n    },\n    spotLightColor: {\n      type: '3f',\n      value: function (instance) {\n        var color = instance.color;\n        var intensity = instance.intensity;\n        return [color[0] * intensity, color[1] * intensity, color[2] * intensity];\n      }\n    }\n  },\n\n  /**\n   * @return {clay.light.Spot}\n   * @memberOf clay.light.Spot.prototype\n   */\n  clone: function () {\n    var light = Light.prototype.clone.call(this);\n    light.range = this.range;\n    light.umbraAngle = this.umbraAngle;\n    light.penumbraAngle = this.penumbraAngle;\n    light.falloffFactor = this.falloffFactor;\n    light.shadowBias = this.shadowBias;\n    light.shadowSlopeScale = this.shadowSlopeScale;\n    return light;\n  }\n});\nexport default SpotLight;","map":{"version":3,"sources":["C:/Users/Administrator/Desktop/data_view/my_project/vue2_app/myapp/node_modules/claygl/src/light/Spot.js"],"names":["Light","Vector3","SpotLight","extend","range","umbraAngle","penumbraAngle","falloffFactor","shadowBias","shadowSlopeScale","type","uniformTemplates","spotLightPosition","value","instance","getWorldPosition","array","spotLightRange","spotLightUmbraAngleCosine","Math","cos","PI","spotLightPenumbraAngleCosine","spotLightFalloffFactor","spotLightDirection","__dir","copy","worldTransform","z","negate","spotLightColor","color","intensity","clone","light","prototype","call"],"mappings":"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","sourcesContent":["import Light from '../Light';\nimport Vector3 from '../math/Vector3';\n\n/**\n * @constructor clay.light.Spot\n * @extends clay.Light\n */\nvar SpotLight = Light.extend(/**@lends clay.light.Spot */ {\n    /**\n     * @type {number}\n     */\n    range: 20,\n    /**\n     * @type {number}\n     */\n    umbraAngle: 30,\n    /**\n     * @type {number}\n     */\n    penumbraAngle: 45,\n    /**\n     * @type {number}\n     */\n    falloffFactor: 2.0,\n    /**\n     * @type {number}\n     */\n    shadowBias: 0.001,\n    /**\n     * @type {number}\n     */\n    shadowSlopeScale: 2.0\n}, {\n\n    type: 'SPOT_LIGHT',\n\n    uniformTemplates: {\n        spotLightPosition: {\n            type: '3f',\n            value: function (instance) {\n                return instance.getWorldPosition().array;\n            }\n        },\n        spotLightRange: {\n            type: '1f',\n            value: function (instance) {\n                return instance.range;\n            }\n        },\n        spotLightUmbraAngleCosine: {\n            type: '1f',\n            value: function (instance) {\n                return Math.cos(instance.umbraAngle * Math.PI / 180);\n            }\n        },\n        spotLightPenumbraAngleCosine: {\n            type: '1f',\n            value: function (instance) {\n                return Math.cos(instance.penumbraAngle * Math.PI / 180);\n            }\n        },\n        spotLightFalloffFactor: {\n            type: '1f',\n            value: function (instance) {\n                return instance.falloffFactor;\n            }\n        },\n        spotLightDirection: {\n            type: '3f',\n            value: function (instance) {\n                instance.__dir = instance.__dir || new Vector3();\n                // Direction is target to eye\n                return instance.__dir.copy(instance.worldTransform.z).negate().array;\n            }\n        },\n        spotLightColor: {\n            type: '3f',\n            value: function (instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0] * intensity, color[1] * intensity, color[2] * intensity];\n            }\n        }\n    },\n    /**\n     * @return {clay.light.Spot}\n     * @memberOf clay.light.Spot.prototype\n     */\n    clone: function () {\n        var light = Light.prototype.clone.call(this);\n        light.range = this.range;\n        light.umbraAngle = this.umbraAngle;\n        light.penumbraAngle = this.penumbraAngle;\n        light.falloffFactor = this.falloffFactor;\n        light.shadowBias = this.shadowBias;\n        light.shadowSlopeScale = this.shadowSlopeScale;\n        return light;\n    }\n});\n\nexport default SpotLight;\n"]},"metadata":{},"sourceType":"module"}