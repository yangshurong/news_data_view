{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/Users/Administrator/Desktop/data_view/my_project/vue2_app/myapp/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _asyncToGenerator from \"C:/Users/Administrator/Desktop/data_view/my_project/vue2_app/myapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.join.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport test_mind_data from \"../assets/Shi/test_mind_data.json\";\nimport word_cloud_data from \"../assets/Sheng/item_data/word_cloud_3ddata.json\";\nimport speed_data from \"../assets/Shi/speed_data.json\";\nexport default {\n  data: function data() {\n    return {\n      cur_info: {\n        year: \"2017\",\n        title: \"政治\",\n        region: \"阳泉\",\n        region_data: \"\"\n      },\n      locate_data_url: {\n        晋中: \"jinzhong.json\",\n        吕梁: \"lvliang.json\",\n        朔州: \"shuozhou.json\",\n        太原: \"taiyuan.json\",\n        阳泉: \"yangquan.json\"\n      },\n      news_value: 0,\n      news_list: [{\n        url: \"http://www.gov.cn/xinwen/2022-05/01/5688367/images/874baddfbc4c43809aae929bf2a190a2.JPG\"\n      }, {\n        url: \"http://www.gov.cn/xinwen/2022-05/01/5688367/images/441dbcc82f714ce58365ab925ac4c783.JPG\"\n      }, {\n        url: \"http://www.gov.cn/xinwen/2022-05/01/5688367/images/89106ba8a3a6455e8d323ba63e307cf0.JPG\"\n      }],\n      time_select_value: 0,\n      rank_speed_list: [{\n        rank: \"排名\",\n        title: \"主题\",\n        speed: \"响应时间\"\n      }, {\n        rank: 1,\n        title: \"政治\",\n        speed: 0.2\n      }, {\n        rank: \"2\",\n        title: \"民生\",\n        speed: 1.9\n      }],\n      orgin_dataAxis: [\"政治\", \"经济\", \"资源\", \"生产\", \"文化\", \"民生\"],\n      width: 576,\n      height: 300,\n      tagsNum: 0,\n      //标签数量\n      RADIUS: 110,\n      //球的半径\n      speedX: Math.PI / 360 / 0.5,\n      //球一帧绕x轴旋转的角度\n      speedY: Math.PI / 360 / 0.5,\n      //球-帧绕y轴旋转的角度\n      tags: [],\n      data: word_cloud_data[\"value\"],\n      timer: null\n    };\n  },\n  created: function created() {\n    this.initData();\n    this.cur_info.region = this.$route.query.region;\n  },\n  mounted: function mounted() {\n    this.set_region_map();\n    this.set_policy_detail();\n    this.set_num_tag();\n    this.set_rank_list();\n    window.addEventListener(\"resize\", this.screenAdapter);\n    this.screenAdapter();\n  },\n  methods: {\n    get_time_change: function get_time_change(new_time) {\n      //时间变化后\n      //console.log(new_time.toString());\n      new_time = new_time.toString();\n\n      if (new_time in speed_data[this.cur_info.region] == false) {\n        alert(\"这里没有数据\");\n        return;\n      }\n\n      this.cur_info.year = new_time;\n      this.set_num_tag();\n      this.set_rank_list();\n      this.screenAdapter(); //this.cur_info.year = new_time.toString();\n      //this.set_num_tag();\n      //this.set_speed_tag();\n    },\n    set_region_map: function set_region_map() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _data, scar_data, i, x, y, z, layoutSize, aspectScale, speed_region_option;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // await this.$axios({\n                //   url: \"https://geo.datav.aliyun.com/areas_v3/bound/370200_full.json\",\n                //   method: \"get\",\n                // }).then((res) => {\n                // });\n                // this.cur_info.region_data = res.data;\n                _this.cur_info.region_data = require(\"../assets/Shi/map/\" + _this.locate_data_url[_this.cur_info.region]);\n\n                _this.$echarts.registerMap(_this.cur_info.region, _this.cur_info.region_data);\n\n                _data = _this.cur_info.region_data.features, scar_data = [];\n\n                for (i in _data) {\n                  x = _data[i].properties.center[0], y = _data[i].properties.center[1], z = _data[i].properties.name;\n                  scar_data.push([x, y, z]);\n                }\n\n                _this.speed_region_Chart = _this.$echarts.init(_this.$refs.region);\n                layoutSize = \"600\", aspectScale = 687 / 415;\n                speed_region_option = {\n                  geo: {\n                    map: _this.cur_info.region,\n                    z: 2,\n                    aspectScale: 1,\n                    layoutCenter: [\"50%\", \"50%\"],\n                    //地图位置\n                    //layoutSize: layoutSize,\n                    zoom: 1,\n                    //当前视角的缩放比例\n                    scaleLimit: {\n                      //滚轮缩放的极限控制\n                      min: 1,\n                      max: 2\n                    },\n                    label: {\n                      normal: {\n                        show: false,\n                        textStyle: {\n                          color: \"#FFFFFF\",\n                          fontSize: 18\n                        }\n                      },\n                      emphasis: {\n                        show: false,\n                        textStyle: {\n                          color: \"#FFFFFF\",\n                          fontSize: 18\n                        }\n                      }\n                    },\n                    itemStyle: {\n                      normal: {\n                        shadowColor: \"rgba(21,55,112,255)\",\n                        shadowOffsetX: 10,\n                        shadowOffsetY: 10,\n                        areaColor: \"rgba(24,48,82,255)\",\n                        borderColor: \"rgba(84,113,166)\",\n                        borderWidth: 1.5\n                      },\n                      emphasis: {\n                        areaColor: \"rgba(7,69,162)\"\n                      }\n                    }\n                  },\n                  series: [{\n                    type: \"map\",\n                    mapType: _this.cur_info.region,\n                    aspectScale: 1,\n                    zoom: 1,\n                    //layoutSize: layoutSize,\n                    z: 1,\n                    layoutCenter: [\"50%\", \"50%\"],\n                    //地图位置\n                    label: {\n                      normal: {\n                        show: false\n                      },\n                      emphasis: {\n                        show: false\n                      }\n                    },\n                    itemStyle: {\n                      normal: {\n                        shadowColor: \"rgba(22,57,89,255)\",\n                        shadowOffsetX: 20,\n                        shadowOffsetY: 20,\n                        //areaColor: \"rgba(22,57,89,255)\",\n                        borderColor: \"#4a75ff\",\n                        borderWidth: 7\n                      },\n                      emphasis: {\n                        areaColor: \"rgba(22,57,89,0)\"\n                      }\n                    }\n                  }]\n                };\n\n                _this.speed_region_Chart.setOption(speed_region_option);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    set_policy_detail: function set_policy_detail() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var option;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                option = {\n                  tooltip: {\n                    trigger: \"item\",\n                    triggerOn: \"mousemove\"\n                  },\n                  series: [{\n                    type: \"tree\",\n                    data: [test_mind_data],\n                    top: \"1%\",\n                    left: \"7%\",\n                    bottom: \"1%\",\n                    right: \"20%\",\n                    symbolSize: 10,\n                    label: {\n                      position: \"left\",\n                      verticalAlign: \"middle\",\n                      align: \"right\",\n                      fontSize: 10,\n                      color: \"#FFFFFF\"\n                    },\n                    leaves: {\n                      label: {\n                        position: \"right\",\n                        verticalAlign: \"middle\",\n                        align: \"left\"\n                      }\n                    },\n                    emphasis: {\n                      focus: \"ancestor\"\n                    },\n                    expandAndCollapse: true,\n                    animationDuration: 550,\n                    animationDurationUpdate: 750\n                  }]\n                };\n                _this2.detail_chart = _this2.$echarts.init(_this2.$refs.mind);\n\n                _this2.detail_chart.setOption(option);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    set_num_tag: function set_num_tag() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var dataAxis, data, i, yMax, dataShadow, _i, echarts, option, zoomSize, that;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                // prettier-ignore\n                dataAxis = [];\n                data = [];\n                _context3.t0 = regeneratorRuntime.keys(_this3.orgin_dataAxis);\n\n              case 3:\n                if ((_context3.t1 = _context3.t0()).done) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                i = _context3.t1.value;\n\n                if (!(_this3.orgin_dataAxis[i] in speed_data[_this3.cur_info.region][_this3.cur_info.year] == false)) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                return _context3.abrupt(\"continue\", 3);\n\n              case 7:\n                dataAxis.push(_this3.orgin_dataAxis[i]);\n                data.push(speed_data[_this3.cur_info.region][_this3.cur_info.year][_this3.orgin_dataAxis[i]][\"num\"]);\n                _context3.next = 3;\n                break;\n\n              case 11:\n                // prettier-ignore\n                yMax = 500;\n                dataShadow = [];\n\n                for (_i = 0; _i < data.length; _i++) {\n                  dataShadow.push(yMax);\n                }\n\n                echarts = _this3.$echarts;\n                option = {\n                  xAxis: {\n                    name: \"主题\",\n                    data: dataAxis,\n                    axisLabel: {\n                      inside: true,\n                      color: \"#FFFFFF\"\n                    },\n                    axisTick: {\n                      show: false\n                    },\n                    axisLine: {\n                      show: false\n                    },\n                    nameTextStyle: {\n                      color: \"rgba(255,255,255)\",\n                      fontSize: 20\n                    },\n                    z: 10\n                  },\n                  yAxis: {\n                    name: \"个数\",\n                    axisLine: {\n                      show: false\n                    },\n                    axisTick: {\n                      show: false\n                    },\n                    nameTextStyle: {\n                      color: \"rgba(255,255,255)\",\n                      fontSize: 20\n                    },\n                    axisLabel: {\n                      textStyle: {\n                        color: \"rgba(255,255,255)\"\n                      }\n                    }\n                  },\n                  dataZoom: [{\n                    type: \"inside\"\n                  }],\n                  series: [{\n                    type: \"bar\",\n                    showBackground: true,\n                    itemStyle: {\n                      color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                        offset: 0,\n                        color: \"#83bff6\"\n                      }, {\n                        offset: 0.5,\n                        color: \"#188df0\"\n                      }, {\n                        offset: 1,\n                        color: \"#188df0\"\n                      }])\n                    },\n                    emphasis: {\n                      itemStyle: {\n                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                          offset: 0,\n                          color: \"#2378f7\"\n                        }, {\n                          offset: 0.7,\n                          color: \"#2378f7\"\n                        }, {\n                          offset: 1,\n                          color: \"#83bff6\"\n                        }])\n                      }\n                    },\n                    data: data\n                  }]\n                }; // Enable data zoom when user click bar.\n\n                zoomSize = 3;\n                _this3.num_tag_chart = _this3.$echarts.init(_this3.$refs.tag_num);\n                that = _this3;\n\n                _this3.num_tag_chart.on(\"click\", function (params) {\n                  var h = parseInt(Math.max(params.dataIndex - zoomSize / 2, 0));\n                  var t = parseInt(Math.min(params.dataIndex + zoomSize / 2, data.length - 1));\n                  console.log(h, t);\n                  that.num_tag_chart.dispatchAction({\n                    type: \"dataZoom\",\n                    startValue: dataAxis[h],\n                    endValue: dataAxis[t]\n                  });\n                });\n\n                _this3.num_tag_chart.setOption(option);\n\n              case 21:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    set_rank_list: function set_rank_list() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var rank_speed_list, tmp, cur_data, rank_num, k, i;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                rank_speed_list = [];\n                tmp = _this4.rank_speed_list[0];\n                _this4.rank_speed_list = [];\n\n                _this4.rank_speed_list.push(tmp);\n\n                cur_data = speed_data[_this4.cur_info.region][_this4.cur_info.year];\n                rank_num = 1;\n\n                for (k in cur_data) {\n                  rank_speed_list.push({\n                    rank: 0,\n                    title: k,\n                    speed: cur_data[k][\"avg\"]\n                  });\n                }\n\n                rank_speed_list = rank_speed_list.sort(function (a, b) {\n                  return a.speed - b.speed;\n                });\n\n                for (i in rank_speed_list) {\n                  rank_speed_list[i].rank = rank_num;\n\n                  _this4.rank_speed_list.push(rank_speed_list[i]);\n\n                  rank_num++;\n                }\n\n              case 9:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    },\n    screenAdapter: function screenAdapter() {\n      var that = this;\n      setTimeout(function () {\n        if (that.detail_chart) {\n          var option = {\n            series: [{\n              symbolSize: that.nowSize(10),\n              label: {\n                fontSize: that.nowSize(10)\n              }\n            }]\n          };\n          that.detail_chart.setOption(option);\n          that.detail_chart.resize();\n        }\n      }, 300);\n      setTimeout(function () {\n        if (that.speed_region_Chart) {\n          var option = {\n            geo: {\n              itemStyle: {\n                normal: {\n                  shadowOffsetX: that.nowSize(10),\n                  shadowOffsetY: that.nowSize(10),\n                  borderWidth: that.nowSize(1.5)\n                }\n              }\n            },\n            series: [{\n              itemStyle: {\n                normal: {\n                  shadowOffsetX: that.nowSize(20),\n                  shadowOffsetY: that.nowSize(20),\n                  borderWidth: that.nowSize(7)\n                }\n              }\n            }]\n          };\n          that.speed_region_Chart.setOption(option);\n          that.speed_region_Chart.resize();\n        }\n      }, 300);\n      setTimeout(function () {\n        if (that.num_tag_chart) {\n          var option = {\n            xAxis: {\n              nameTextStyle: {\n                fontSize: that.nowSize(20)\n              }\n            },\n            yAxis: {\n              nameTextStyle: {\n                fontSize: that.nowSize(20)\n              }\n            }\n          };\n          that.num_tag_chart.setOption(option);\n          that.num_tag_chart.resize();\n        }\n      }, 300);\n    },\n    initData: function initData() {\n      //初始化标签位置\n      var tags = [];\n      this.tagsNum = this.data.length;\n\n      for (var i = 0; i < this.data.length; i++) {\n        var tag = {};\n        var k = -1 + (2 * (i + 1) - 1) / this.tagsNum;\n        var a = Math.acos(k);\n        var b = a * Math.sqrt(this.tagsNum * Math.PI); //计算标签相对于球心的角度\n\n        tag.text = this.data[i];\n        tag.x = this.CX + this.RADIUS * Math.sin(a) * Math.cos(b); //根据标签角度求出标签的x,y,z坐标\n\n        tag.y = this.CY + this.RADIUS * Math.sin(a) * Math.sin(b);\n        tag.z = this.RADIUS * Math.cos(a);\n        tag.id = i; // 给标签添加id\n\n        tag.color = \"rgb(\" + [Math.round(Math.random() * 254), Math.round(Math.random() * 254), Math.round(Math.random() * 254)].join(\",\") + \")\";\n        tags.push(tag); // console.log(tag);\n      }\n\n      this.tags = tags; //让vue替我们完成视图更新\n    },\n    // 纵向旋转\n    rotateX: function rotateX(angleX) {\n      var cos = Math.cos(angleX);\n      var sin = Math.sin(angleX);\n\n      var _iterator = _createForOfIteratorHelper(this.tags),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var tag = _step.value;\n          var y1 = (tag.y - this.CY) * cos - tag.z * sin + this.CY;\n          var z1 = tag.z * cos + (tag.y - this.CY) * sin;\n          tag.y = y1;\n          tag.z = z1;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    },\n    // 横向旋转\n    rotateY: function rotateY(angleY) {\n      var cos = Math.cos(angleY);\n      var sin = Math.sin(angleY);\n\n      var _iterator2 = _createForOfIteratorHelper(this.tags),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var tag = _step2.value;\n          var x1 = (tag.x - this.CX) * cos - tag.z * sin + this.CX;\n          var z1 = tag.z * cos + (tag.x - this.CX) * sin;\n          tag.x = x1;\n          tag.z = z1;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    },\n    // 运动函数\n    runTags: function runTags() {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {\n        var timer;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (typeof _this5.timer === \"number\") {\n                  clearInterval(_this5.timer);\n                  _this5.timer = null;\n                }\n\n                timer = setInterval(function () {\n                  _this5.rotateX(_this5.speedX);\n\n                  _this5.rotateY(_this5.speedY);\n                }, 17);\n                _this5.timer = timer;\n\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }))();\n    },\n    // 监听移入事件\n    listenerMove: function listenerMove(e) {\n      if (e.target.id) {\n        clearInterval(this.timer);\n      }\n    },\n    // 监听移出事件\n    listenerOut: function listenerOut(e) {\n      if (e.target.id) {\n        this.runTags();\n      }\n    },\n    // 点击事件\n    clickToPage: function clickToPage() {} //up----------------------------------------------------------set word_cloud\n\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this.speed_region_Chart) {\n      this.speed_region_Chart.dispose();\n      this.speed_region_Chart = null;\n    }\n\n    if (this.detail_chart) {\n      this.detail_chart.dispose();\n      this.detail_chart = null;\n    }\n\n    if (this.word_cloud_Chart) {\n      this.word_cloud_Chart.dispose();\n      this.word_cloud_Chart = null;\n    }\n\n    if (this.num_tag_chart) {\n      this.num_tag_chart.dispose();\n      this.num_tag_chart = null;\n    }\n\n    window.removeEventListener(\"resize\", this.screenAdapter);\n  },\n  computed: {\n    CX: function CX() {\n      //球心x坐标\n      return this.width / 2;\n    },\n    CY: function CY() {\n      //球心y坐标\n      return this.height / 2;\n    },\n    nowSize: function nowSize() {\n      return function nowSize(val) {\n        var initWidth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1920;\n        var nowClientWidth = document.documentElement.clientWidth;\n        return val * (nowClientWidth / initWidth);\n      };\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;AACA;AACA;AACAA,MADA,kBACA;AACA;AACAC;AACAC,oBADA;AAEAC,mBAFA;AAGAC,oBAHA;AAIAC;AAJA,OADA;AAOAC;AACAC,2BADA;AAEAC,0BAFA;AAGAC,2BAHA;AAIAC,0BAJA;AAKAC;AALA,OAPA;AAcAC,mBAdA;AAeAC,kBACA;AACAC;AADA,OADA,EAIA;AACAA;AADA,OAJA,EAOA;AACAA;AADA,OAPA,CAfA;AA0BAC,0BA1BA;AA2BAC,wBACA;AACAC,kBADA;AAEAd,mBAFA;AAGAe;AAHA,OADA,EAMA;AACAD,eADA;AAEAd,mBAFA;AAGAe;AAHA,OANA,EAWA;AACAD,iBADA;AAEAd,mBAFA;AAGAe;AAHA,OAXA,CA3BA;AA4CAC,0DA5CA;AA6CAC,gBA7CA;AA8CAC,iBA9CA;AA+CAC,gBA/CA;AA+CA;AACAC,iBAhDA;AAgDA;AACAC,iCAjDA;AAiDA;AACAC,iCAlDA;AAkDA;AACAC,cAnDA;AAoDA1B,oCApDA;AAqDA2B;AArDA;AAuDA,GAzDA;AA0DAC,SA1DA,qBA0DA;AACA;AACA;AACA,GA7DA;AA8DAC,SA9DA,qBA8DA;AACA;AACA;AACA;AACA;AACAC;AACA;AACA,GArEA;AAsEAC;AACAC,mBADA,2BACAC,QADA,EACA;AACA;AACA;AACAA;;AACA;AACAC;AACA;AACA;;AACA;AACA;AACA;AACA,2BAXA,CAYA;AACA;AACA;AACA,KAhBA;AAiBAC,kBAjBA,4BAiBA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EACA,4CADA;;AAEA,2CACA,qBADA,EAEA,0BAFA;;AAIAC,qBAbA,GAaA,mCAbA,EAcAC,SAdA,GAcA,EAdA;;AAeA;AACAC,mBADA,GACAF,6BADA,EAEAG,CAFA,GAEAH,6BAFA,EAGAI,CAHA,GAGAJ,wBAHA;AAIAC;AACA;;AACA;AACAI,0BAtBA,GAsBA,KAtBA,EAuBAC,WAvBA,GAuBA,SAvBA;AAwBAC,mCAxBA,GAwBA;AACAC;AACAC,8CADA;AAEAL,wBAFA;AAGAE,kCAHA;AAIAI,gDAJA;AAIA;AACA;AACAC,2BANA;AAMA;AACAC;AACA;AACAC,4BAFA;AAGAC;AAHA,qBAPA;AAYAC;AACAC;AACAC,mCADA;AAEAC;AACAC,0CADA;AAEAC;AAFA;AAFA,uBADA;AAQAC;AACAJ,mCADA;AAEAC;AACAC,0CADA;AAEAC;AAFA;AAFA;AARA,qBAZA;AA4BAE;AACAN;AACAO,0DADA;AAEAC,yCAFA;AAGAC,yCAHA;AAIAC,uDAJA;AAKAC,uDALA;AAMAC;AANA,uBADA;AASAP;AACAK;AADA;AATA;AA5BA,mBADA;AA4CAG,2BACA;AACAC,+BADA;AAEAC,kDAFA;AAGAzB,kCAHA;AAIAK,2BAJA;AAKA;AACAP,wBANA;AAOAM,gDAPA;AAOA;AACAK;AACAC;AACAC;AADA,uBADA;AAIAI;AACAJ;AADA;AAJA,qBARA;AAgBAK;AACAN;AACAO,yDADA;AAEAC,yCAFA;AAGAC,yCAHA;AAIA;AACAE,8CALA;AAMAC;AANA,uBADA;AASAP;AACAK;AADA;AATA;AAhBA,mBADA;AA5CA,iBAxBA;;AAqGA;;AArGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsGA,KAvHA;AAwHAM,qBAxHA,+BAwHA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACAC,sBADA,GACA;AACAC;AACAC,mCADA;AAEAC;AAFA,mBADA;AAKAP,2BACA;AACAC,gCADA;AAEAlE,0CAFA;AAGAyE,6BAHA;AAIAC,8BAJA;AAKAC,gCALA;AAMAC,gCANA;AAOAC,kCAPA;AAQA1B;AACA2B,sCADA;AAEAC,6CAFA;AAGAC,oCAHA;AAIAxB,kCAJA;AAKAD;AALA,qBARA;AAeA0B;AACA9B;AACA2B,yCADA;AAEAC,+CAFA;AAGAC;AAHA;AADA,qBAfA;AAsBAvB;AACAyB;AADA,qBAtBA;AAyBAC,2CAzBA;AA0BAC,0CA1BA;AA2BAC;AA3BA,mBADA;AALA,iBADA;AAsCA;;AACA;;AAvCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwCA,KAhKA;AAiKAC,eAjKA,yBAiKA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA;AACAC,wBAFA,GAEA,EAFA;AAGAvF,oBAHA,GAGA,EAHA;AAAA,uDAIA,qBAJA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAIAwF,iBAJA;;AAAA,sBAMA,4BACAC,wDADA,IAEA,KARA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAWAF;AACAvF,0BACAyF,yDACA,wBADA,EAEA,KAFA,CADA;AAZA;AAAA;;AAAA;AAkBA;AACAC,oBAnBA,GAmBA,GAnBA;AAoBAC,0BApBA,GAoBA,EApBA;;AAqBA;AACAA;AACA;;AACAC,uBAxBA,GAwBA,eAxBA;AAyBAvB,sBAzBA,GAyBA;AACAwB;AACAC,8BADA;AAEA9F,kCAFA;AAGA+F;AACAC,kCADA;AAEAzC;AAFA,qBAHA;AAOA0C;AACA5C;AADA,qBAPA;AAUA6C;AACA7C;AADA,qBAVA;AAaA8C;AACA5C,gDADA;AAEAC;AAFA,qBAbA;AAkBAhB;AAlBA,mBADA;AAqBA4D;AACAN,8BADA;AAEAI;AACA7C;AADA,qBAFA;AAKA4C;AACA5C;AADA,qBALA;AAQA8C;AACA5C,gDADA;AAEAC;AAFA,qBARA;AAaAuC;AACAzC;AACAC;AADA;AADA;AAbA,mBArBA;AAwCA8C,6BACA;AACAnC;AADA,mBADA,CAxCA;AA6CAD,2BACA;AACAC,+BADA;AAEAoC,wCAFA;AAGA5C;AACAH,6EACA;AAAAgD;AAAAhD;AAAA,uBADA,EAEA;AAAAgD;AAAAhD;AAAA,uBAFA,EAGA;AAAAgD;AAAAhD;AAAA,uBAHA;AADA,qBAHA;AAUAE;AACAC;AACAH,+EACA;AAAAgD;AAAAhD;AAAA,yBADA,EAEA;AAAAgD;AAAAhD;AAAA,yBAFA,EAGA;AAAAgD;AAAAhD;AAAA,yBAHA;AADA;AADA,qBAVA;AAmBAvD;AAnBA,mBADA;AA7CA,iBAzBA,EA8FA;;AACAwG,wBA/FA,GA+FA,CA/FA;AAgGA;AACAC,oBAjGA,GAiGA,MAjGA;;AAkGA;AACA;AACA,mCACAC,0DADA;AAGAC;AACAF;AACAvC,oCADA;AAEA0C,2CAFA;AAGAC;AAHA;AAKA,iBAXA;;AAYA;;AA9GA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+GA,KAhRA;AAiRAC,iBAjRA,2BAiRA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA9F,+BADA,GACA,EADA;AAEA+F,mBAFA,GAEA,yBAFA;AAGA;;AACA;;AACAC,wBALA,GAKAvB,wDALA;AAMAwB,wBANA,GAMA,CANA;;AAOA;AACAjG;AACAC,2BADA;AAEAd,4BAFA;AAGAe;AAHA;AAKA;;AACAF;AACA;AACA,iBAFA;;AAGA;AACAA;;AACA;;AACAiG;AACA;;AArBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBA,KAvSA;AAwSAC,iBAxSA,2BAwSA;AACA;AACAC;AACA;AACA;AACAlD,qBACA;AACAY,0CADA;AAEA1B;AACAK;AADA;AAFA,aADA;AADA;AAUAiD;AACAA;AACA;AACA,OAfA,EAeA,GAfA;AAgBAU;AACA;AACA;AACAvE;AACAc;AACAN;AACAQ,iDADA;AAEAC,iDAFA;AAGAG;AAHA;AADA;AADA,aADA;AAUAC,qBACA;AACAP;AACAN;AACAQ,iDADA;AAEAC,iDAFA;AAGAG;AAHA;AADA;AADA,aADA;AAVA;AAsBAyC;AACAA;AACA;AACA,OA3BA,EA2BA,GA3BA;AA4BAU;AACA;AACA;AACAtB;AACAM;AACA3C;AADA;AADA,aADA;AAMA4C;AACAD;AACA3C;AADA;AADA;AANA;AAYAiD;AACAA;AACA;AACA,OAjBA,EAiBA,GAjBA;AAkBA,KAxWA;AA0WAW,YA1WA,sBA0WA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA,sDAJA,CAIA;;AACAC;AACAA,kEANA,CAMA;;AACAA;AACAA;AACAA,mBATA,CASA;;AACAA,oBACA,SACA,CACAX,+BADA,EAEAA,+BAFA,EAGAA,+BAHA,EAIAY,IAJA,CAIA,GAJA,CADA,GAMA,GAPA;AAQA5F,uBAlBA,CAmBA;AACA;;AACA,uBAzBA,CAyBA;AACA,KApYA;AAqYA;AACA6F,WAtYA,mBAsYAC,MAtYA,EAsYA;AACA;AACA;;AAFA,iDAGA,SAHA;AAAA;;AAAA;AAGA;AAAA;AACA;AACA;AACAH;AACAA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AASA,KA/YA;AAgZA;AACAI,WAjZA,mBAiZAC,MAjZA,EAiZA;AACA;AACA;;AAFA,kDAGA,SAHA;AAAA;;AAAA;AAGA;AAAA;AACA;AACA;AACAL;AACAA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AASA,KA1ZA;AA2ZA;AACAM,WA5ZA,qBA4ZA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACAC;AACA;AACA;;AACAjG,qBALA,GAKAkG;AACA;;AACA;AACA,iBAHA,EAGA,EAHA,CALA;AASA;;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA,KAtaA;AAuaA;AACAC,gBAxaA,wBAwaAC,CAxaA,EAwaA;AACA;AACAH;AACA;AACA,KA5aA;AA6aA;AACAI,eA9aA,uBA8aAD,CA9aA,EA8aA;AACA;AACA;AACA;AACA,KAlbA;AAmbA;AACAE,eApbA,yBAobA,EApbA,CAqbA;;AArbA,GAtEA;AA6fAC,eA7fA,2BA6fA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACApG;AACA,GA/gBA;AAghBAqG;AACAC,MADA,gBACA;AACA;AACA;AACA,KAJA;AAKAC,MALA,gBAKA;AACA;AACA;AACA,KARA;AASAC,WATA,qBASA;AACA;AAAA;AACA;AACA;AACA,OAHA;AAIA;AAdA;AAhhBA","names":["data","cur_info","year","title","region","region_data","locate_data_url","晋中","吕梁","朔州","太原","阳泉","news_value","news_list","url","time_select_value","rank_speed_list","rank","speed","orgin_dataAxis","width","height","tagsNum","RADIUS","speedX","speedY","tags","timer","created","mounted","window","methods","get_time_change","new_time","alert","set_region_map","_data","scar_data","x","y","z","layoutSize","aspectScale","speed_region_option","geo","map","layoutCenter","zoom","scaleLimit","min","max","label","normal","show","textStyle","color","fontSize","emphasis","itemStyle","shadowColor","shadowOffsetX","shadowOffsetY","areaColor","borderColor","borderWidth","series","type","mapType","set_policy_detail","option","tooltip","trigger","triggerOn","top","left","bottom","right","symbolSize","position","verticalAlign","align","leaves","focus","expandAndCollapse","animationDuration","animationDurationUpdate","set_num_tag","dataAxis","i","speed_data","yMax","dataShadow","echarts","xAxis","name","axisLabel","inside","axisTick","axisLine","nameTextStyle","yAxis","dataZoom","showBackground","offset","zoomSize","that","Math","console","startValue","endValue","set_rank_list","tmp","cur_data","rank_num","screenAdapter","setTimeout","initData","tag","join","rotateX","angleX","rotateY","angleY","runTags","clearInterval","setInterval","listenerMove","e","listenerOut","clickToPage","beforeDestroy","computed","CX","CY","nowSize"],"sourceRoot":"src/views","sources":["ShiView.vue"],"sourcesContent":["<template>\r\n  <div class=\"ShiBackground\">\r\n    <div class=\"title\"></div>\r\n    <div class=\"content\">\r\n      <div class=\"policy_content\">\r\n        <Carousel\r\n          autoplay\r\n          v-model=\"news_value\"\r\n          loop\r\n          style=\"width: 100%; height: 100%\"\r\n        >\r\n          <CarouselItem v-for=\"(item, i) in news_list\" :key=\"i\">\r\n            <div\r\n              :style=\"{\r\n                margin: '1.8333rem 0 0 0.6667rem',\r\n                height: '14.4833rem',\r\n                width: '6.8333rem',\r\n                background: 'url(' + item.url + ') no-repeat',\r\n                'background-size': '100% 100%',\r\n              }\"\r\n            ></div>\r\n          </CarouselItem>\r\n        </Carousel>\r\n      </div>\r\n      <div class=\"news_content\">\r\n        <div class=\"map_chart\">\r\n          <div\r\n            ref=\"region\"\r\n            style=\"width: 100%; height: 100%; margin-left: 0rem\"\r\n          ></div>\r\n        </div>\r\n        <div class=\"time\">\r\n          <div style=\"font-size: 0.3rem; color: #ffffff; margin-bottom: 0rem\">\r\n            2017\r\n          </div>\r\n          <el-slider\r\n            v-model=\"time_select_value\"\r\n            :max=\"2021\"\r\n            :min=\"2017\"\r\n            @change=\"get_time_change\"\r\n            :step=\"1\"\r\n            class=\"time_select\"\r\n          >\r\n          </el-slider>\r\n\r\n          <div style=\"font-size: 0.3rem; color: #ffffff; margin-top: 0rem\">\r\n            2021\r\n          </div>\r\n        </div>\r\n        <div class=\"mind\">\r\n          <div\r\n            ref=\"mind\"\r\n            style=\"width: 100%; height: 100%; margin-left: 0rem\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n      <div class=\"right\">\r\n        <div class=\"tag_num\">\r\n          <div\r\n            ref=\"tag_num\"\r\n            style=\"\r\n              width: 100%;\r\n              height: 100%;\r\n              margin-left: 0rem;\r\n              margin-top: 0.5rem;\r\n            \"\r\n          ></div>\r\n        </div>\r\n        <div class=\"wordCloud\">\r\n          <svg\r\n            :width=\"nowSize(width)\"\r\n            :height=\"nowSize(height)\"\r\n            style=\"margin-top: 0.5rem\"\r\n          >\r\n            <a\r\n              class=\"fontA\"\r\n              :style=\"{ fill: tag.color, 'font-weight': 'bold' }\"\r\n              v-for=\"(tag, index) in tags\"\r\n              :key=\"`tag-${index}`\"\r\n            >\r\n              <text\r\n                :id=\"tag.id\"\r\n                :x=\"nowSize(tag.x)\"\r\n                :y=\"nowSize(tag.y)\"\r\n                :font-size=\"\r\n                  nowSize(18) * (nowSize(600) / (nowSize(600) - nowSize(tag.z)))\r\n                \"\r\n                :fill-opacity=\"(nowSize(400) + nowSize(tag.z)) / nowSize(400)\"\r\n                @mousemove=\"listenerMove($event)\"\r\n                @mouseout=\"listenerOut($event)\"\r\n                @click=\"clickToPage\"\r\n              >\r\n                {{ tag.text }}\r\n              </text>\r\n            </a>\r\n          </svg>\r\n        </div>\r\n        <div class=\"rank_speed\">\r\n          <div style=\"width: 100%; height: 0.8333rem\"></div>\r\n          <div class=\"speed_content\">\r\n            <div v-for=\"(item, i) in rank_speed_list\" :key=\"i\">\r\n              <div class=\"list_item\" :class=\"{ as_first: i == 0 }\">\r\n                <div class=\"item_rank\">{{ item.rank }}</div>\r\n                <div\r\n                  class=\"item_title\"\r\n                  :class=\"{ item_title_content: i !== 0 }\"\r\n                >\r\n                  {{ item.title }}\r\n                </div>\r\n                <div class=\"item_speed\">{{ item.speed }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport test_mind_data from \"../assets/Shi/test_mind_data.json\";\r\nimport word_cloud_data from \"../assets/Sheng/item_data/word_cloud_3ddata.json\";\r\nimport speed_data from \"../assets/Shi/speed_data.json\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      cur_info: {\r\n        year: \"2017\",\r\n        title: \"政治\",\r\n        region: \"阳泉\",\r\n        region_data: \"\",\r\n      },\r\n      locate_data_url: {\r\n        晋中: \"jinzhong.json\",\r\n        吕梁: \"lvliang.json\",\r\n        朔州: \"shuozhou.json\",\r\n        太原: \"taiyuan.json\",\r\n        阳泉: \"yangquan.json\",\r\n      },\r\n      news_value: 0,\r\n      news_list: [\r\n        {\r\n          url: \"http://www.gov.cn/xinwen/2022-05/01/5688367/images/874baddfbc4c43809aae929bf2a190a2.JPG\",\r\n        },\r\n        {\r\n          url: \"http://www.gov.cn/xinwen/2022-05/01/5688367/images/441dbcc82f714ce58365ab925ac4c783.JPG\",\r\n        },\r\n        {\r\n          url: \"http://www.gov.cn/xinwen/2022-05/01/5688367/images/89106ba8a3a6455e8d323ba63e307cf0.JPG\",\r\n        },\r\n      ],\r\n      time_select_value: 0,\r\n      rank_speed_list: [\r\n        {\r\n          rank: \"排名\",\r\n          title: \"主题\",\r\n          speed: \"响应时间\",\r\n        },\r\n        {\r\n          rank: 1,\r\n          title: \"政治\",\r\n          speed: 0.2,\r\n        },\r\n        {\r\n          rank: \"2\",\r\n          title: \"民生\",\r\n          speed: 1.9,\r\n        },\r\n      ],\r\n      orgin_dataAxis: [\"政治\", \"经济\", \"资源\", \"生产\", \"文化\", \"民生\"],\r\n      width: 576,\r\n      height: 300,\r\n      tagsNum: 0, //标签数量\r\n      RADIUS: 110, //球的半径\r\n      speedX: Math.PI / 360 / 0.5, //球一帧绕x轴旋转的角度\r\n      speedY: Math.PI / 360 / 0.5, //球-帧绕y轴旋转的角度\r\n      tags: [],\r\n      data: word_cloud_data[\"value\"],\r\n      timer: null,\r\n    };\r\n  },\r\n  created() {\r\n    this.initData();\r\n    this.cur_info.region = this.$route.query.region;\r\n  },\r\n  mounted() {\r\n    this.set_region_map();\r\n    this.set_policy_detail();\r\n    this.set_num_tag();\r\n    this.set_rank_list();\r\n    window.addEventListener(\"resize\", this.screenAdapter);\r\n    this.screenAdapter();\r\n  },\r\n  methods: {\r\n    get_time_change(new_time) {\r\n      //时间变化后\r\n      //console.log(new_time.toString());\r\n      new_time = new_time.toString();\r\n      if (new_time in speed_data[this.cur_info.region] == false) {\r\n        alert(\"这里没有数据\");\r\n        return;\r\n      }\r\n      this.cur_info.year = new_time;\r\n      this.set_num_tag();\r\n      this.set_rank_list();\r\n      this.screenAdapter();\r\n      //this.cur_info.year = new_time.toString();\r\n      //this.set_num_tag();\r\n      //this.set_speed_tag();\r\n    },\r\n    async set_region_map() {\r\n      // await this.$axios({\r\n      //   url: \"https://geo.datav.aliyun.com/areas_v3/bound/370200_full.json\",\r\n      //   method: \"get\",\r\n      // }).then((res) => {\r\n      // });\r\n      // this.cur_info.region_data = res.data;\r\n      this.cur_info.region_data = require(\"../assets/Shi/map/\" +\r\n        this.locate_data_url[this.cur_info.region]);\r\n      this.$echarts.registerMap(\r\n        this.cur_info.region,\r\n        this.cur_info.region_data\r\n      );\r\n      let _data = this.cur_info.region_data.features,\r\n        scar_data = [];\r\n      for (let i in _data) {\r\n        let x = _data[i].properties.center[0],\r\n          y = _data[i].properties.center[1],\r\n          z = _data[i].properties.name;\r\n        scar_data.push([x, y, z]);\r\n      }\r\n      this.speed_region_Chart = this.$echarts.init(this.$refs.region);\r\n      let layoutSize = \"600\",\r\n        aspectScale = 687 / 415;\r\n      let speed_region_option = {\r\n        geo: {\r\n          map: this.cur_info.region,\r\n          z: 2,\r\n          aspectScale: 1,\r\n          layoutCenter: [\"50%\", \"50%\"], //地图位置\r\n          //layoutSize: layoutSize,\r\n          zoom: 1, //当前视角的缩放比例\r\n          scaleLimit: {\r\n            //滚轮缩放的极限控制\r\n            min: 1,\r\n            max: 2,\r\n          },\r\n          label: {\r\n            normal: {\r\n              show: false,\r\n              textStyle: {\r\n                color: \"#FFFFFF\",\r\n                fontSize: 18,\r\n              },\r\n            },\r\n            emphasis: {\r\n              show: false,\r\n              textStyle: {\r\n                color: \"#FFFFFF\",\r\n                fontSize: 18,\r\n              },\r\n            },\r\n          },\r\n          itemStyle: {\r\n            normal: {\r\n              shadowColor: \"rgba(21,55,112,255)\",\r\n              shadowOffsetX: 10,\r\n              shadowOffsetY: 10,\r\n              areaColor: \"rgba(24,48,82,255)\",\r\n              borderColor: \"rgba(84,113,166)\",\r\n              borderWidth: 1.5,\r\n            },\r\n            emphasis: {\r\n              areaColor: \"rgba(7,69,162)\",\r\n            },\r\n          },\r\n        },\r\n\r\n        series: [\r\n          {\r\n            type: \"map\",\r\n            mapType: this.cur_info.region,\r\n            aspectScale: 1,\r\n            zoom: 1,\r\n            //layoutSize: layoutSize,\r\n            z: 1,\r\n            layoutCenter: [\"50%\", \"50%\"], //地图位置\r\n            label: {\r\n              normal: {\r\n                show: false,\r\n              },\r\n              emphasis: {\r\n                show: false,\r\n              },\r\n            },\r\n            itemStyle: {\r\n              normal: {\r\n                shadowColor: \"rgba(22,57,89,255)\",\r\n                shadowOffsetX: 20,\r\n                shadowOffsetY: 20,\r\n                //areaColor: \"rgba(22,57,89,255)\",\r\n                borderColor: \"#4a75ff\",\r\n                borderWidth: 7,\r\n              },\r\n              emphasis: {\r\n                areaColor: \"rgba(22,57,89,0)\",\r\n              },\r\n            },\r\n          },\r\n        ],\r\n      };\r\n      this.speed_region_Chart.setOption(speed_region_option);\r\n    },\r\n    async set_policy_detail() {\r\n      let option = {\r\n        tooltip: {\r\n          trigger: \"item\",\r\n          triggerOn: \"mousemove\",\r\n        },\r\n        series: [\r\n          {\r\n            type: \"tree\",\r\n            data: [test_mind_data],\r\n            top: \"1%\",\r\n            left: \"7%\",\r\n            bottom: \"1%\",\r\n            right: \"20%\",\r\n            symbolSize: 10,\r\n            label: {\r\n              position: \"left\",\r\n              verticalAlign: \"middle\",\r\n              align: \"right\",\r\n              fontSize: 10,\r\n              color: \"#FFFFFF\",\r\n            },\r\n            leaves: {\r\n              label: {\r\n                position: \"right\",\r\n                verticalAlign: \"middle\",\r\n                align: \"left\",\r\n              },\r\n            },\r\n            emphasis: {\r\n              focus: \"ancestor\",\r\n            },\r\n            expandAndCollapse: true,\r\n            animationDuration: 550,\r\n            animationDurationUpdate: 750,\r\n          },\r\n        ],\r\n      };\r\n      this.detail_chart = this.$echarts.init(this.$refs.mind);\r\n      this.detail_chart.setOption(option);\r\n    },\r\n    async set_num_tag() {\r\n      // prettier-ignore\r\n      let dataAxis = [];\r\n      let data = [];\r\n      for (let i in this.orgin_dataAxis) {\r\n        if (\r\n          this.orgin_dataAxis[i] in\r\n            speed_data[this.cur_info.region][this.cur_info.year] ==\r\n          false\r\n        )\r\n          continue;\r\n        dataAxis.push(this.orgin_dataAxis[i]);\r\n        data.push(\r\n          speed_data[this.cur_info.region][this.cur_info.year][\r\n            this.orgin_dataAxis[i]\r\n          ][\"num\"]\r\n        );\r\n      }\r\n      // prettier-ignore\r\n      let yMax = 500;\r\n      let dataShadow = [];\r\n      for (let i = 0; i < data.length; i++) {\r\n        dataShadow.push(yMax);\r\n      }\r\n      let echarts = this.$echarts;\r\n      let option = {\r\n        xAxis: {\r\n          name: \"主题\",\r\n          data: dataAxis,\r\n          axisLabel: {\r\n            inside: true,\r\n            color: \"#FFFFFF\",\r\n          },\r\n          axisTick: {\r\n            show: false,\r\n          },\r\n          axisLine: {\r\n            show: false,\r\n          },\r\n          nameTextStyle: {\r\n            color: \"rgba(255,255,255)\",\r\n            fontSize: 20,\r\n          },\r\n\r\n          z: 10,\r\n        },\r\n        yAxis: {\r\n          name: \"个数\",\r\n          axisLine: {\r\n            show: false,\r\n          },\r\n          axisTick: {\r\n            show: false,\r\n          },\r\n          nameTextStyle: {\r\n            color: \"rgba(255,255,255)\",\r\n            fontSize: 20,\r\n          },\r\n\r\n          axisLabel: {\r\n            textStyle: {\r\n              color: \"rgba(255,255,255)\",\r\n            },\r\n          },\r\n        },\r\n        dataZoom: [\r\n          {\r\n            type: \"inside\",\r\n          },\r\n        ],\r\n        series: [\r\n          {\r\n            type: \"bar\",\r\n            showBackground: true,\r\n            itemStyle: {\r\n              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n                { offset: 0, color: \"#83bff6\" },\r\n                { offset: 0.5, color: \"#188df0\" },\r\n                { offset: 1, color: \"#188df0\" },\r\n              ]),\r\n            },\r\n            emphasis: {\r\n              itemStyle: {\r\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n                  { offset: 0, color: \"#2378f7\" },\r\n                  { offset: 0.7, color: \"#2378f7\" },\r\n                  { offset: 1, color: \"#83bff6\" },\r\n                ]),\r\n              },\r\n            },\r\n            data: data,\r\n          },\r\n        ],\r\n      };\r\n      // Enable data zoom when user click bar.\r\n      const zoomSize = 3;\r\n      this.num_tag_chart = this.$echarts.init(this.$refs.tag_num);\r\n      let that = this;\r\n      this.num_tag_chart.on(\"click\", function (params) {\r\n        let h = parseInt(Math.max(params.dataIndex - zoomSize / 2, 0));\r\n        let t = parseInt(\r\n          Math.min(params.dataIndex + zoomSize / 2, data.length - 1)\r\n        );\r\n        console.log(h, t);\r\n        that.num_tag_chart.dispatchAction({\r\n          type: \"dataZoom\",\r\n          startValue: dataAxis[h],\r\n          endValue: dataAxis[t],\r\n        });\r\n      });\r\n      this.num_tag_chart.setOption(option);\r\n    },\r\n    async set_rank_list() {\r\n      let rank_speed_list = [];\r\n      let tmp = this.rank_speed_list[0];\r\n      this.rank_speed_list = [];\r\n      this.rank_speed_list.push(tmp);\r\n      let cur_data = speed_data[this.cur_info.region][this.cur_info.year];\r\n      let rank_num = 1;\r\n      for (let k in cur_data) {\r\n        rank_speed_list.push({\r\n          rank: 0,\r\n          title: k,\r\n          speed: cur_data[k][\"avg\"],\r\n        });\r\n      }\r\n      rank_speed_list = rank_speed_list.sort((a, b) => {\r\n        return a.speed - b.speed;\r\n      });\r\n      for (let i in rank_speed_list) {\r\n        rank_speed_list[i].rank = rank_num;\r\n        this.rank_speed_list.push(rank_speed_list[i]);\r\n        rank_num++;\r\n      }\r\n    },\r\n    screenAdapter() {\r\n      let that = this;\r\n      setTimeout(function () {\r\n        if (that.detail_chart) {\r\n          let option = {\r\n            series: [\r\n              {\r\n                symbolSize: that.nowSize(10),\r\n                label: {\r\n                  fontSize: that.nowSize(10),\r\n                },\r\n              },\r\n            ],\r\n          };\r\n          that.detail_chart.setOption(option);\r\n          that.detail_chart.resize();\r\n        }\r\n      }, 300);\r\n      setTimeout(function () {\r\n        if (that.speed_region_Chart) {\r\n          let option = {\r\n            geo: {\r\n              itemStyle: {\r\n                normal: {\r\n                  shadowOffsetX: that.nowSize(10),\r\n                  shadowOffsetY: that.nowSize(10),\r\n                  borderWidth: that.nowSize(1.5),\r\n                },\r\n              },\r\n            },\r\n            series: [\r\n              {\r\n                itemStyle: {\r\n                  normal: {\r\n                    shadowOffsetX: that.nowSize(20),\r\n                    shadowOffsetY: that.nowSize(20),\r\n                    borderWidth: that.nowSize(7),\r\n                  },\r\n                },\r\n              },\r\n            ],\r\n          };\r\n          that.speed_region_Chart.setOption(option);\r\n          that.speed_region_Chart.resize();\r\n        }\r\n      }, 300);\r\n      setTimeout(function () {\r\n        if (that.num_tag_chart) {\r\n          let option = {\r\n            xAxis: {\r\n              nameTextStyle: {\r\n                fontSize: that.nowSize(20),\r\n              },\r\n            },\r\n            yAxis: {\r\n              nameTextStyle: {\r\n                fontSize: that.nowSize(20),\r\n              },\r\n            },\r\n          };\r\n          that.num_tag_chart.setOption(option);\r\n          that.num_tag_chart.resize();\r\n        }\r\n      }, 300);\r\n    },\r\n\r\n    initData() {\r\n      //初始化标签位置\r\n      let tags = [];\r\n      this.tagsNum = this.data.length;\r\n      for (let i = 0; i < this.data.length; i++) {\r\n        let tag = {};\r\n        let k = -1 + (2 * (i + 1) - 1) / this.tagsNum;\r\n        let a = Math.acos(k);\r\n        let b = a * Math.sqrt(this.tagsNum * Math.PI); //计算标签相对于球心的角度\r\n        tag.text = this.data[i];\r\n        tag.x = this.CX + this.RADIUS * Math.sin(a) * Math.cos(b); //根据标签角度求出标签的x,y,z坐标\r\n        tag.y = this.CY + this.RADIUS * Math.sin(a) * Math.sin(b);\r\n        tag.z = this.RADIUS * Math.cos(a);\r\n        tag.id = i; // 给标签添加id\r\n        tag.color =\r\n          \"rgb(\" +\r\n          [\r\n            Math.round(Math.random() * 254),\r\n            Math.round(Math.random() * 254),\r\n            Math.round(Math.random() * 254),\r\n          ].join(\",\") +\r\n          \")\";\r\n        tags.push(tag);\r\n        // console.log(tag);\r\n      }\r\n      this.tags = tags; //让vue替我们完成视图更新\r\n    },\r\n    // 纵向旋转\r\n    rotateX(angleX) {\r\n      var cos = Math.cos(angleX);\r\n      var sin = Math.sin(angleX);\r\n      for (let tag of this.tags) {\r\n        var y1 = (tag.y - this.CY) * cos - tag.z * sin + this.CY;\r\n        var z1 = tag.z * cos + (tag.y - this.CY) * sin;\r\n        tag.y = y1;\r\n        tag.z = z1;\r\n      }\r\n    },\r\n    // 横向旋转\r\n    rotateY(angleY) {\r\n      var cos = Math.cos(angleY);\r\n      var sin = Math.sin(angleY);\r\n      for (let tag of this.tags) {\r\n        var x1 = (tag.x - this.CX) * cos - tag.z * sin + this.CX;\r\n        var z1 = tag.z * cos + (tag.x - this.CX) * sin;\r\n        tag.x = x1;\r\n        tag.z = z1;\r\n      }\r\n    },\r\n    // 运动函数\r\n    async runTags() {\r\n      if (typeof this.timer === \"number\") {\r\n        clearInterval(this.timer);\r\n        this.timer = null;\r\n      }\r\n      let timer = setInterval(() => {\r\n        this.rotateX(this.speedX);\r\n        this.rotateY(this.speedY);\r\n      }, 17);\r\n      this.timer = timer;\r\n    },\r\n    // 监听移入事件\r\n    listenerMove(e) {\r\n      if (e.target.id) {\r\n        clearInterval(this.timer);\r\n      }\r\n    },\r\n    // 监听移出事件\r\n    listenerOut(e) {\r\n      if (e.target.id) {\r\n        this.runTags();\r\n      }\r\n    },\r\n    // 点击事件\r\n    clickToPage() {},\r\n    //up----------------------------------------------------------set word_cloud\r\n  },\r\n  beforeDestroy() {\r\n    if (this.speed_region_Chart) {\r\n      this.speed_region_Chart.dispose();\r\n      this.speed_region_Chart = null;\r\n    }\r\n    if (this.detail_chart) {\r\n      this.detail_chart.dispose();\r\n      this.detail_chart = null;\r\n    }\r\n    if (this.word_cloud_Chart) {\r\n      this.word_cloud_Chart.dispose();\r\n      this.word_cloud_Chart = null;\r\n    }\r\n    if (this.num_tag_chart) {\r\n      this.num_tag_chart.dispose();\r\n      this.num_tag_chart = null;\r\n    }\r\n    window.removeEventListener(\"resize\", this.screenAdapter);\r\n  },\r\n  computed: {\r\n    CX() {\r\n      //球心x坐标\r\n      return this.width / 2;\r\n    },\r\n    CY() {\r\n      //球心y坐标\r\n      return this.height / 2;\r\n    },\r\n    nowSize() {\r\n      return function nowSize(val, initWidth = 1920) {\r\n        let nowClientWidth = document.documentElement.clientWidth;\r\n        return val * (nowClientWidth / initWidth);\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.tag_num {\r\n  width: 100%;\r\n  height: 5.6667rem;\r\n  background: url(../assets/Shi/tag_num.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center top;\r\n}\r\n.wordCloud {\r\n  width: 100%;\r\n  margin-top: 0.2rem;\r\n  height: 5.0333rem;\r\n  background: url(../assets/Shi/3dwordCloud.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center top;\r\n}\r\n.rank_speed {\r\n  width: 100%;\r\n  margin-top: 0.2rem;\r\n  margin-left: 0.1rem;\r\n  height: 5.45rem;\r\n  background: url(../assets/Shi/rank_speed.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center top;\r\n  display: flex;\r\n  flex-flow: column;\r\n  .speed_content {\r\n    margin-left: .5333rem;\r\n    margin-top: 0.3333rem;\r\n    line-height: .3333rem;\r\n    border-radius: .0833rem;\r\n    width: 8.15rem;\r\n    height: 3.5833rem;\r\n    background-color: rgba(64, 183, 246, 0.2);\r\n  }\r\n  .as_first {\r\n    margin-top: 1.8333rem;\r\n  }\r\n  .list_item {\r\n    display: flex;\r\n    width: 8.15rem;\r\n    margin-left: 1.4833rem;\r\n    margin-top: 0.0833rem;\r\n    .item_rank {\r\n      color: rgba(255, 255, 255, 100);\r\n      font-size: 0.3333rem;\r\n      text-align: left;\r\n      font-weight: bold;\r\n      width: 1.8333rem;\r\n      //font-family: SourceHanSansSC-regular;\r\n    }\r\n    .item_title {\r\n      color: rgba(161, 158, 158, 100);\r\n      font-size: 0.3333rem;\r\n      width: 1.4333rem+0.5167rem;\r\n      text-align: left;\r\n    }\r\n    .item_speed {\r\n      color: rgba(161, 158, 158, 100);\r\n      font-size: 0.3333rem;\r\n    }\r\n    .item_title_content {\r\n      color: rgba(231, 0, 0);\r\n      font-size: 0.3333rem;\r\n      width: 1.4333rem+0.5167rem;\r\n      text-align: left;\r\n      font-weight: bold;\r\n    }\r\n  }\r\n}\r\n.news_content {\r\n  .map_chart {\r\n    width: 11.4333rem;\r\n    height: 6.9167rem;\r\n    margin: 1.4833rem 0 0 0.3667rem;\r\n  }\r\n  .time {\r\n    width: 100%;\r\n    height: 0.4667rem;\r\n    margin-left: 1.3833rem;\r\n    margin-top: 0rem;\r\n    display: flex;\r\n    .time_select {\r\n      width: 8.2667rem;\r\n      height: 0.4667rem;\r\n      margin-top: 0.3333rem;\r\n    }\r\n  }\r\n  .mind {\r\n    width: 8.9667rem;\r\n    height: 6.5rem;\r\n    margin-left: 1.2833rem;\r\n  }\r\n  width: 12.25rem;\r\n  height: 15.7833rem;\r\n  margin-top: 1.9rem;\r\n  margin-left: 0.75rem;\r\n  background: url(../assets/Shi/news_content.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center top;\r\n  display: flex;\r\n  flex-flow: column;\r\n}\r\n.policy_content {\r\n  width: 8.1167rem;\r\n  height: 16.6167rem;\r\n  margin-top: 0.7167rem;\r\n  margin-left: 0.9rem;\r\n  background: url(../assets/Shi/policy_content.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center top;\r\n}\r\n.right {\r\n  margin-top: 1.15rem;\r\n  margin-left: 0.6rem;\r\n  width: 9.45rem;\r\n  height: 12.9167rem+4.7833rem;\r\n  display: flex;\r\n  flex-flow: column;\r\n\r\n  justify-content: flex-start;\r\n}\r\n\r\n.ShiBackground {\r\n  width: 32.2667rem;\r\n  height: 18.05rem;\r\n  background: url(../assets/Sheng/ShengBackground.PNG) no-repeat;\r\n  background-size: 100% 100%;\r\n  .title {\r\n    width: 32.2667rem;\r\n    height: 5.7167rem;\r\n    background: url(../assets/main_page_title.png) no-repeat;\r\n    background-size: 100% 100%;\r\n    background-position: center top;\r\n  }\r\n  .content {\r\n    margin-top: -5.7167rem;\r\n    width: 32.2667rem;\r\n    height: 12.3333rem;\r\n    display: flex;\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}