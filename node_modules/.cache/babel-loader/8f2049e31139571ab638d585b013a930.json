{"ast":null,"code":"import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nvar DIRTY_PREFIX = '__dt__';\n\nvar Cache = function Cache() {\n  this._contextId = 0;\n  this._caches = [];\n  this._context = {};\n};\n\nCache.prototype = {\n  use: function use(contextId, documentSchema) {\n    var caches = this._caches;\n\n    if (!caches[contextId]) {\n      caches[contextId] = {};\n\n      if (documentSchema) {\n        caches[contextId] = documentSchema();\n      }\n    }\n\n    this._contextId = contextId;\n    this._context = caches[contextId];\n  },\n  put: function put(key, value) {\n    this._context[key] = value;\n  },\n  get: function get(key) {\n    return this._context[key];\n  },\n  dirty: function dirty(field) {\n    field = field || '';\n    var key = DIRTY_PREFIX + field;\n    this.put(key, true);\n  },\n  dirtyAll: function dirtyAll(field) {\n    field = field || '';\n    var key = DIRTY_PREFIX + field;\n    var caches = this._caches;\n\n    for (var i = 0; i < caches.length; i++) {\n      if (caches[i]) {\n        caches[i][key] = true;\n      }\n    }\n  },\n  fresh: function fresh(field) {\n    field = field || '';\n    var key = DIRTY_PREFIX + field;\n    this.put(key, false);\n  },\n  freshAll: function freshAll(field) {\n    field = field || '';\n    var key = DIRTY_PREFIX + field;\n    var caches = this._caches;\n\n    for (var i = 0; i < caches.length; i++) {\n      if (caches[i]) {\n        caches[i][key] = false;\n      }\n    }\n  },\n  isDirty: function isDirty(field) {\n    field = field || '';\n    var key = DIRTY_PREFIX + field;\n    var context = this._context;\n    return !context.hasOwnProperty(key) || context[key] === true;\n  },\n  deleteContext: function deleteContext(contextId) {\n    delete this._caches[contextId];\n    this._context = {};\n  },\n  delete: function _delete(key) {\n    delete this._context[key];\n  },\n  clearAll: function clearAll() {\n    this._caches = {};\n  },\n  getContext: function getContext() {\n    return this._context;\n  },\n  eachContext: function eachContext(cb, context) {\n    var keys = Object.keys(this._caches);\n    keys.forEach(function (key) {\n      cb && cb.call(context, key);\n    });\n  },\n  miss: function miss(key) {\n    return !this._context.hasOwnProperty(key);\n  }\n};\nCache.prototype.constructor = Cache;\nexport default Cache;","map":{"version":3,"sources":["C:/Users/Administrator/Desktop/data_view/my_project/vue2_app/myapp/node_modules/_claygl@1.3.0@claygl/src/core/Cache.js"],"names":["DIRTY_PREFIX","Cache","_contextId","_caches","_context","prototype","use","contextId","documentSchema","caches","put","key","value","get","dirty","field","dirtyAll","i","length","fresh","freshAll","isDirty","context","hasOwnProperty","deleteContext","delete","clearAll","getContext","eachContext","cb","keys","Object","forEach","call","miss","constructor"],"mappings":"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","sourcesContent":["var DIRTY_PREFIX = '__dt__';\n\nvar Cache = function () {\n\n    this._contextId = 0;\n\n    this._caches = [];\n\n    this._context = {};\n};\n\nCache.prototype = {\n\n    use: function (contextId, documentSchema) {\n        var caches = this._caches;\n        if (!caches[contextId]) {\n            caches[contextId] = {};\n\n            if (documentSchema) {\n                caches[contextId] = documentSchema();\n            }\n        }\n        this._contextId = contextId;\n\n        this._context = caches[contextId];\n    },\n\n    put: function (key, value) {\n        this._context[key] = value;\n    },\n\n    get: function (key) {\n        return this._context[key];\n    },\n\n    dirty: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        this.put(key, true);\n    },\n\n    dirtyAll: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        var caches = this._caches;\n        for (var i = 0; i < caches.length; i++) {\n            if (caches[i]) {\n                caches[i][key] = true;\n            }\n        }\n    },\n\n    fresh: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        this.put(key, false);\n    },\n\n    freshAll: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        var caches = this._caches;\n        for (var i = 0; i < caches.length; i++) {\n            if (caches[i]) {\n                caches[i][key] = false;\n            }\n        }\n    },\n\n    isDirty: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        var context = this._context;\n        return  !context.hasOwnProperty(key)\n            || context[key] === true;\n    },\n\n    deleteContext: function (contextId) {\n        delete this._caches[contextId];\n        this._context = {};\n    },\n\n    delete: function (key) {\n        delete this._context[key];\n    },\n\n    clearAll: function () {\n        this._caches = {};\n    },\n\n    getContext: function () {\n        return this._context;\n    },\n\n    eachContext : function (cb, context) {\n        var keys = Object.keys(this._caches);\n        keys.forEach(function (key) {\n            cb && cb.call(context, key);\n        });\n    },\n\n    miss: function (key) {\n        return ! this._context.hasOwnProperty(key);\n    }\n};\n\nCache.prototype.constructor = Cache;\n\nexport default Cache;\n"]},"metadata":{},"sourceType":"module"}